var Vn=Object.defineProperty,Hn=Object.defineProperties,Wn=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Jt=(e,t)=>{if(t=Symbol[e])return t;throw Error("Symbol."+e+" is not defined")},vt=(e,t,n)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))zn.call(t,n)&&vt(e,n,t[n]);if(Qt)for(var n of Qt(t))Kn.call(t,n)&&vt(e,n,t[n]);return e},L=(e,t)=>Hn(e,Wn(t)),w=(e,t,n)=>(vt(e,typeof t!="symbol"?t+"":t,n),n),wt=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},j=(e,t,n)=>(wt(e,t,"read from private field"),n?n.call(e):t.get(e)),re=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xt=(e,t,n,r)=>(wt(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),je=(e,t,n)=>(wt(e,t,"access private method"),n),$=function(e,t){this[0]=e,this[1]=t},ne=(e,t,n)=>{var r=(a,s,l,c)=>{try{var u=n[a](s),m=(s=u.value)instanceof $,f=u.done;Promise.resolve(m?s[0]:s).then(p=>m?r(a==="return"?a:"next",s[1]?{done:p.done,value:p.value}:p,l,c):l({value:p,done:f})).catch(p=>r("throw",p,l,c))}catch(p){c(p)}},o=a=>i[a]=s=>new Promise((l,c)=>r(a,s,l,c)),i={};return n=n.apply(e,t),i[Symbol.asyncIterator]=()=>i,o("next"),o("throw"),o("return"),i},X=(e,t,n)=>(t=e[Jt("asyncIterator")])?t.call(e):(e=e[Jt("iterator")](),t={},n=(r,o)=>(o=e[r])&&(t[r]=i=>new Promise((a,s,l)=>(i=o.call(e,i),l=i.done,Promise.resolve(i.value).then(c=>a({value:c,done:l}),s)))),n("next"),n("return"),t);const Gn=":host{display:flex;align-items:center;justify-content:center}\n";class Yn extends HTMLElement{constructor(){var t,n;super(),w(this,"size"),w(this,"color"),this.size=(t=this.getAttribute("size"))!=null?t:"1.5rem",this.color=(n=this.getAttribute("color"))!=null?n:"gray",this.attachShadow({mode:"open"})}connectedCallback(){this.render();const t=document.createElement("style");t.textContent=Gn,this.shadowRoot.appendChild(t)}render(){const t=this.shadowRoot,n='\n      width="'.concat(this.size,'"\n      height="').concat(this.size,'"\n      xmlns="http://www.w3.org/2000/svg"\n      aria-hidden="true"\n    ');switch(this.getAttribute("name")){case"warning":t.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 16 14" fill="').concat(this.color,'">\n            <path d="M5.925 2.344c1.146-1.889 3.002-1.893 4.149 0l4.994 8.235c1.146 1.889.288 3.421-1.916 3.421h-10.305c-2.204 0-3.063-1.529-1.916-3.421l4.994-8.235zm1.075 1.656v5h2v-5h-2zm0 6v2h2v-2h-2z"/>\n          </svg>\n        ');break;case"close":t.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 20 20" fill="').concat(this.color,'">\n            <path d="M17.1 4.3l-1.4-1.4-5.7 5.7-5.7-5.7-1.4 1.4 5.7 5.7-5.7 5.7 1.4 1.4 5.7-5.7 5.7 5.7 1.4-1.4-5.7-5.7z"/>\n          </svg>\n        ');break;default:t.innerHTML="";break}}}const Zn="#overlay{position:fixed;width:100%;height:100%;background:rgba(0,0,0,.4);top:0;left:0;z-index:2147483647;animation:modalPop .3s ease-out}#modal{position:fixed;top:1em;left:50%;width:100%;max-width:460px;transform:translate(-50%,-100%);background:#fff;color:#000;border:1px solid #d0d0d0;border-radius:4px;animation:modalSlideInFromTop .3s forwards}@keyframes modalPop{0%{opacity:0}to{opacity:1}}@keyframes modalSlideInFromTop{0%{transform:translate(-50%,-100%)}to{transform:translate(-50%)}}@keyframes modalSlideInFromBottom{0%{transform:translate(-50%,100%)}to{transform:translate(-50%)}}@media only screen and (max-width: 640px){#modal{top:auto;bottom:0;animation:modalSlideInFromBottom .3s forwards}}#modal header,#modal footer{padding:1em}#modal header{display:flex;margin-bottom:2em;text-align:center;border-bottom:1px solid #d0d0d0}#title{flex-grow:2;display:flex;justify-content:center;font-weight:700}#title svg-icon{margin-right:.25em}#content{text-align:left;padding:0 1em 1em;overflow:auto;max-height:84vh}#modal #content p{margin:0}#close-icon,#close-button{cursor:pointer}#close-icon{background:transparent;padding:0;border:none}#close-button{width:100%;padding:1em;color:#fff;background-color:#1773b0;border:none;border-radius:4px}#close-button:hover,#close-button:active{background:#136f99}#close-button:active,#close-button:focus{box-shadow:0 0 0 4px #1990c640}\n";var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var $r={exports:{}},_t={exports:{}},er;function Xn(){return er||(er=1,function(e,t){(function(n,r){e.exports=r()})(Lr,function(){function n(d){return!isNaN(parseFloat(d))&&isFinite(d)}function r(d){return d.charAt(0).toUpperCase()+d.substring(1)}function o(d){return function(){return this[d]}}var i=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],s=["fileName","functionName","source"],l=["args"],c=["evalOrigin"],u=i.concat(a,s,l,c);function m(d){if(d)for(var h=0;h<u.length;h++)d[u[h]]!==void 0&&this["set"+r(u[h])](d[u[h]])}m.prototype={getArgs:function(){return this.args},setArgs:function(d){if(Object.prototype.toString.call(d)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=d},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(d){if(d instanceof m)this.evalOrigin=d;else if(d instanceof Object)this.evalOrigin=new m(d);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var d=this.getFileName()||"",h=this.getLineNumber()||"",y=this.getColumnNumber()||"",b=this.getFunctionName()||"";return this.getIsEval()?d?"[eval] ("+d+":"+h+":"+y+")":"[eval]:"+h+":"+y:b?b+" ("+d+":"+h+":"+y+")":d+":"+h+":"+y}},m.fromString=function(d){var h=d.indexOf("("),y=d.lastIndexOf(")"),b=d.substring(0,h),g=d.substring(h+1,y).split(","),S=d.substring(y+1);if(S.indexOf("@")===0)var I=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(S,""),k=I[1],N=I[2],F=I[3];return new m({functionName:b,args:g||void 0,fileName:k,lineNumber:N||void 0,columnNumber:F||void 0})};for(var f=0;f<i.length;f++)m.prototype["get"+r(i[f])]=o(i[f]),m.prototype["set"+r(i[f])]=function(d){return function(h){this[d]=!!h}}(i[f]);for(var p=0;p<a.length;p++)m.prototype["get"+r(a[p])]=o(a[p]),m.prototype["set"+r(a[p])]=function(d){return function(h){if(!n(h))throw new TypeError(d+" must be a Number");this[d]=Number(h)}}(a[p]);for(var v=0;v<s.length;v++)m.prototype["get"+r(s[v])]=o(s[v]),m.prototype["set"+r(s[v])]=function(d){return function(h){this[d]=String(h)}}(s[v]);return m})}(_t)),_t.exports}(function(e,t){(function(n,r){e.exports=r(Xn())})(Lr,function(n){var r=/(^|@)\S+:\d+/,o=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/;return{parse:function(a){if(typeof a.stacktrace<"u"||typeof a["opera#sourceloc"]<"u")return this.parseOpera(a);if(a.stack&&a.stack.match(o))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(a.indexOf(":")===-1)return[a];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,l=s.exec(a.replace(/[()]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},parseV8OrIE:function(a){var s=a.stack.split("\n").filter(function(l){return!!l.match(o)},this);return s.map(function(l){l.indexOf("(eval ")>-1&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var c=l.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),u=c.match(/ (\(.+\)$)/);c=u?c.replace(u[0],""):c;var m=this.extractLocation(u?u[1]:c),f=u&&c||void 0,p=["eval","<anonymous>"].indexOf(m[0])>-1?void 0:m[0];return new n({functionName:f,fileName:p,lineNumber:m[1],columnNumber:m[2],source:l})},this)},parseFFOrSafari:function(a){var s=a.stack.split("\n").filter(function(l){return!l.match(i)},this);return s.map(function(l){if(l.indexOf(" > eval")>-1&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return new n({functionName:l});var c=/((.*".+"[^@]*)?[^@]*)(?:@)/,u=l.match(c),m=u&&u[1]?u[1]:void 0,f=this.extractLocation(l.replace(c,""));return new n({functionName:m,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:l})},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,l=a.message.split("\n"),c=[],u=2,m=l.length;u<m;u+=2){var f=s.exec(l[u]);f&&c.push(new n({fileName:f[2],lineNumber:f[1],source:l[u]}))}return c},parseOpera10:function(a){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=a.stacktrace.split("\n"),c=[],u=0,m=l.length;u<m;u+=2){var f=s.exec(l[u]);f&&c.push(new n({functionName:f[3]||void 0,fileName:f[2],lineNumber:f[1],source:l[u]}))}return c},parseOpera11:function(a){var s=a.stack.split("\n").filter(function(l){return!!l.match(r)&&!l.match(/^Error created at/)},this);return s.map(function(l){var c=l.split("@"),u=this.extractLocation(c.pop()),m=c.shift()||"",f=m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,p;m.match(/\(([^)]*)\)/)&&(p=m.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var v=p===void 0||p==="[arguments not available]"?void 0:p.split(",");return new n({functionName:f,args:v,fileName:u[0],lineNumber:u[1],columnNumber:u[2],source:l})},this)}}})})($r);var eo=$r.exports;const to=Qn(eo);function ro(e,t){return!!(t!=null&&t.includes(e))}function no(e,t){try{return to.parse(t).map(n=>{var r,o,i;return{method:(r=n.functionName)!=null?r:"",file:(o=n.fileName)!=null?o:"",lineNumber:(i=n.lineNumber)!=null?i:0,columnNumber:n.columnNumber,inProject:ro(e,n.fileName)}})}catch(n){return[]}}var tr="5",oo=class{constructor(e){w(this,"breadcrumbs",[]),w(this,"apiKey"),w(this,"plugins"),w(this,"appId"),w(this,"appType"),w(this,"appVersion"),w(this,"releaseStage"),w(this,"locale"),w(this,"userAgent"),w(this,"metadata"),w(this,"onError"),w(this,"onPostErrorListeners",[]);var t;this.apiKey=e.apiKey,this.appType=e.appType,this.appId=e.appId,this.appVersion=e.appVersion,this.releaseStage=e.releaseStage,this.locale=e.locale,this.userAgent=e.userAgent,this.metadata=e.metadata,this.onError=e.onError,this.plugins=(t=e.plugins)!=null?t:[],this.plugins.forEach(n=>n.load(this)),this.leaveBreadcrumb("Bugsnag started",void 0,"state")}leaveBreadcrumb(e,t,n="manual"){this.breadcrumbs.push({name:e,metaData:t,type:n,timestamp:new Date().toISOString()})}notify(e,{errorClass:t,severity:n,severityType:r,handled:o=!0,metadata:i,context:a}={}){var s,l;let c=_(_({},this.metadata),i),u=this.buildBugsnagEvent({error:e,errorClass:t,severityType:r,handled:o,severity:n,metadata:c,context:a});if(((l=(s=this.onError)==null?void 0:s.call(this,u))==null||l)&&this.releaseStage!=="development"){let m=this.sendToBugsnag(u);return this.onPostErrorListeners.forEach(f=>f(u)),m}return Promise.resolve()}addOnPostError(e){this.onPostErrorListeners.push(e)}buildBugsnagEvent({error:e,errorClass:t,severity:n="error",severityType:r="handledException",handled:o,metadata:i={},context:a}){let s=new Date().toISOString(),{breadcrumbs:l,appId:c,appType:u,appVersion:m,releaseStage:f,locale:p,userAgent:v}=this;return{payloadVersion:tr,exceptions:[{errorClass:t!=null?t:e.name,stacktrace:no(c,e),message:e.message}],severity:n,severityReason:{type:r},unhandled:!o,app:{id:c,type:u,version:m,releaseStage:f},device:{time:s,locale:p,userAgent:v},breadcrumbs:l,context:a,metaData:i}}async sendToBugsnag(e){let{apiKey:t}=this,n={apiKey:t,notifier:{name:"Bugsnag JavaScript",version:"7.22.2",url:"https://github.com/bugsnag/bugsnag-js"},events:[e]};try{await fetch("https://notify.bugsnag.com/",{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":t,"Bugsnag-Payload-Version":tr,"Bugsnag-Sent-At":e.device.time},body:JSON.stringify(n)})}catch(r){console.warn("[bugsnag-light] failed to send an event"),console.warn(r)}}};function ao(e){let t=window.onerror;window.onerror=(n,r,o,i,a)=>{a&&e.notify(a,{severityType:"unhandledException",handled:!1}),typeof t=="function"&&t.apply(window.onerror,[n,r,o,i,a])}}function io(e){window.addEventListener("unhandledrejection",({reason:t})=>{t&&e.notify(t,{severityType:"unhandledPromiseRejection",handled:!1})})}function Bt(e){try{const t=new RegExp("(^| )".concat(e,"=([^;]+)")).exec(document.cookie);return t?t[2]:null}catch(t){return null}}const qt={BRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--branded",UNBRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--unbranded",MORE_PAYMENT_OPTION_BUTTON:"shopify-payment-button__more-options",HIDDEN:"shopify-payment-button__button--hidden"},rr={DARK:"apple-pay-button-black",LIGHT:"apple-pay-button-white"},so=44,co="_shopify_y",Ur=6,lo="discount_code",uo=["Load failed","Failed to fetch","when attempting to fetch resource"],po=["Chrome-Lighthouse"],Tt={};function ho(e){return!e.exceptions[0]||(yo(e),fo())?!1:mo(e)}function fo(){const e=navigator.userAgent;return po.some(t=>e.includes(t))}function yo(e){var t,n;e.context=window.location.pathname,e.request||(e.request={}),e.request.url=window.location.href,e.device.orientation=(n=(t=window.screen)==null?void 0:t.orientation)==null?void 0:n.type,e.metaData=_(_({},Tt),e.metaData)}function mo(e){const t=e.exceptions[0];return uo.some(n=>{var r,o;return(o=(r=t.message)==null?void 0:r.includes(n))!=null?o:!1})||t.stacktrace.some(n=>{var r;return(r=n.file)==null?void 0:r.includes("spin.dev")})||t.errorClass==="OpenTelemetryClientError"&&(t.message==="Server responded with 404"||t.message==="Server responded with undefined")?!1:t.stacktrace.some(n=>!!(n!=null&&n.inProject))}var xr;const go={apiKey:"cb577dc231be1c7494db8a63441ef66b",appId:"portable-wallets",appVersion:"0.0.0-1ef4a126a70b2475bc43db48b92495247984ab3f",releaseStage:"production",locale:"en",userAgent:navigator.userAgent,metadata:{user:{id:(xr=Bt(co))!=null?xr:"unknown"}},onError:ho},E=new oo(go);function Ft(e){for(const[t,n]of Object.entries(e))Tt[t]=_(_({},Tt[t]),n)}var Br={en:{instruments_copy:{checkout:{buy_now:"Buy it now"}},error_dialogs:{checkout:{title:"Checkout unavailable",generic_error:"Checkout is currently unavailable due to technical problems. Please try again in a few minutes.",button_text:"Close"},wallet:{title:"%{wallet} unavailable",generic_error:"There was an issue with %{wallet}. Try again or use a different payment method."}},more_payment_options:"More payment options",order_summary:{total:"Total",subtotal:"Subtotal",duties:"Duties",taxes:"Taxes",shipping:"Shipping",discount:"Discount"},brand:{apple_pay:"Apple Pay"},errors:{missing:{email:"Enter an email address",first_name:"Enter a first name",last_name:"Enter a last name",address1:"Enter an address",address2:"Enter an apartment, suite, etc.",city:"Enter a city",zone:"Select a state / province",phone:"Enter a phone number",postal_code:"Enter a ZIP / postal code"},invalid:{email:"Enter a valid email",first_name:"Enter a valid first name",last_name:"Enter a valid last name",address1:"Enter a valid address",address2:"Enter a valid apartment, suite, etc.",city:"Enter a valid city",zone:"Select a valid state / province",country:"Select a country / region",phone:"Enter a valid phone number",postal_code:"Enter a valid zip / postal code"}}}};Br.en;function ot(){return new Ot(Br)}class nr extends Error{constructor(t,n){const r="i18n: Missing or invalid translation '".concat(t,"' in '").concat(n,"'");super(r)}}class bo extends Error{constructor(t,n,r){const o="i18n: Missing translation template key '".concat(t,"' for '").concat(n,"' in '").concat(r,"'");super(o)}}class vo extends Error{constructor(t,n,r){const o="i18n: Invalid pluralization for '".concat(t,"':'").concat(n,"' in '").concat(r,"'");super(o)}}var ke,B,Je,qr,Xe,Fr,et,jr;const Gt=class ss{constructor(t){re(this,Je),re(this,Xe),re(this,et),re(this,ke,void 0),re(this,B,ss.getDefaultLanguage()),Xt(this,ke,t)}static getDefaultLanguage(){return"en"}get locale(){return j(this,B)}translate(t,n={}){var r;const o=t.split(".");let i=j(this,ke)[j(this,B)];try{for(const a of o)switch(typeof i){case"object":i=i[a];break;case"string":case"undefined":throw new nr(t,j(this,B))}if(je(this,Je,qr).call(this,i,n)){if(typeof i=="string")throw new vo(t,i,j(this,B));i=i[je(this,Xe,Fr).call(this,i,n.count)]}if(typeof i!="string")throw new nr(t,j(this,B));return je(this,et,jr).call(this,i,n)}catch(a){return E.notify(a),(r=n.defaultValue)!=null?r:t}}};ke=new WeakMap,B=new WeakMap,Je=new WeakSet,qr=function(e,t){return typeof e!="string"&&t.count!=="undefined"},Xe=new WeakSet,Fr=function(e,t){let n=t===1?"one":"other";return t===0&&typeof e!="string"&&e.zero!=="undefined"&&(n="zero"),n},et=new WeakSet,jr=function(e,t={}){const n=e.match(/%\{.+?\}/g);return n?n.reduce((r,o)=>{const i=o.replace(/%\{(.*)\}/,"$1");return t[i]?r.replace(o,t[i]):(E.notify(new bo(i,e,j(this,B))),r)},e):e};let Ot=Gt;var ee=(e=>(e.CartPage="cart_page",e.CartAjax="cart_ajax",e.ProductPage="product",e.Unknown="unknown",e))(ee||{}),De=(e=>(e.CartChange="/cart/change",e.CartUpdate="/cart/update",e.CartAdd="/cart/add",e.CartClear="/cart/clear",e))(De||{});const Re=[];function te(e,t,n){window.customElements!=null&&(window.customElements.get(e)||(window.customElements.define(e,t),n!=null&&n.isChildCustomElement&&Re.push(e)))}function Vr(){var e,t;const n=new URLSearchParams(window.location.search);return((t=(e=n.get("shopify-debug"))!=null?e:n.get("shopifydebug"))!=null?t:"")!==""}function wo(){return new URLSearchParams(window.location.search).get("show")||null}function _o(){var e;const t=(e=window.Shopify)==null?void 0:e.CartType;let n=ee.ProductPage;return window.Shopify?t===ee.CartAjax?n=ee.CartAjax:t===ee.CartPage&&(n=ee.CartPage):n=ee.Unknown,n}function Nt(e){return Number(e).toFixed(2)}function Co(e){if(!(!e||!e.id||!e.id.includes("gid://shopify/Cart/")))return e.id.replace("gid://shopify/Cart/","")}class Eo extends HTMLElement{constructor(){super(),w(this,"overflow"),this.attachShadow({mode:"open"}),this.overflow=""}connectedCallback(){const t=ot();this.render(t);const n=this.shadowRoot,r=n.getElementById("modal");n.querySelectorAll("button").forEach(i=>i.addEventListener("click",this.closeModal.bind(this))),n.getElementById("overlay").addEventListener("click",i=>this.handleOutsideClick(i,r)),document.addEventListener("keydown",this.handleEscapeKey.bind(this));const o=document.createElement("style");o.textContent=Zn,n.appendChild(o),this.overflow=document.body.style.overflow,document.body.style.overflow="hidden",this.trapFocus(r,n),te("svg-icon",Yn)}trapFocus(t,n){const r=t.querySelectorAll("a[href], button"),o=Array.from(r),i=o[0],a=o[o.length-1];t.addEventListener("keydown",s=>{s.key==="Tab"&&!s.shiftKey&&n.activeElement===a&&(s.preventDefault(),i.focus()),s.key==="Tab"&&s.shiftKey&&n.activeElement===i&&(s.preventDefault(),a.focus())}),i.focus()}handleOutsideClick(t,n){n.contains(t.target)||this.closeModal()}handleEscapeKey(t){t.key==="Escape"&&this.closeModal()}closeModal(){document.body.style.overflow=this.overflow,this.remove()}render(t){const n=this.getAttribute("title"),r=this.getAttribute("has-close-button"),o=t.translate("error_dialogs.checkout.button_text"),i='\n      <footer>\n        <button type="button" id="close-button">'.concat(o,"</button>\n      </footer>\n    ");this.shadowRoot.innerHTML='\n      <div id="overlay">\n        <div id="modal">\n          <header>\n            <span id="title">\n              '.concat(n,'\n            </span>\n            <button type="button" id="close-icon" aria-label=').concat(o,'>\n              <svg-icon name="close" color="gray"></svg-icon>\n            </button>\n          </header>\n          <div id="content">\n            <p><slot></slot></p>\n          </div>\n          ').concat(r?i:"","\n        </div>\n      </div>\n    ")}}function jt(e,t){const n=document.createElement("top-level-modal");n.setAttribute("data-testid","top-level-modal"),n.setAttribute("title",'<svg-icon name="warning" color="red"></svg-icon> '.concat(e)),n.setAttribute("has-close-button","true"),n.textContent=t,document.body.appendChild(n)}te("top-level-modal",Eo);class Hr extends HTMLElement{get buyerCountry(){return this.getAttribute("buyer-country")}get buyerCurrency(){const t=this.getAttribute("buyer-currency");if(t==null)throw new Error("WalletElement buyer-currency is null");return t}get accessToken(){return this.getAttribute("access-token")}get disabled(){const t=this.getAttribute("disabled");return t==="true"||t===""}set disabled(t){t?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}get hasSellingPlan(){const t=this.getAttribute("has-selling-plan");return t==="true"||t===""}set hasSellingPlan(t){t?this.setAttribute("has-selling-plan","true"):this.removeAttribute("has-selling-plan")}}const So=70;class ie{constructor(t,n,r,o){w(this,"red"),w(this,"green"),w(this,"blue"),w(this,"opacity"),this.red=t||0,this.green=n||0,this.blue=r||0,this.opacity=typeof o>"u"?1:o}getLuminance(){const t=this.red&255,n=this.green&255,r=this.blue&255;return t*.2126+n*.7152+r*.0722}isDark(){return this.opacity===0?!1:this.getLuminance()/this.opacity<So}blendWith(t,n){this.opacity=1-(1-t.opacity)*(1-n.opacity),this.red=this.blend(t.red,n.red,t,n),this.green=this.blend(t.green,n.green,t,n),this.blue=this.blend(t.blue,n.blue,t,n)}blend(t,n,r,o){return Math.round(t*r.opacity/this.opacity+n*o.opacity*(1-r.opacity)/this.opacity)}}function Po(e){const t=[...e];let n=new ie(0,0,0,0),r=new ie(255,255,255,1),o=t.shift();for(;o;)n.opacity>0&&o.opacity>0?(r=new ie(0,0,0,0),r.blendWith(o,n)):o.opacity>0?r=o:r=n,n=r,o=t.shift();return r}function Ao(e){const t=[];let n=e;for(;n.parentElement;){n=n.parentElement;const r=window.getComputedStyle(n).backgroundColor,o=Io(r);if(r&&t.push(o),o.opacity===1)break}try{return Po(t.reverse())}catch(r){return E.notify(new Error("[BackgroundDetection] Failed to blend colors for element ".concat(e.outerHTML))),new ie(255,255,255,1)}}function Io(e){try{const t=e.split("(")[1].split(")")[0].replace(" ","").split(",");return new ie(Number(t[0]),Number(t[1]),Number(t[2]),typeof t[3]>"u"?1:Number(t[3]))}catch(t){E.notify(new Error("[BackgroundDetection] Failed to convert rgbString to array ".concat(e)))}return new ie(255,255,255,1)}var To=0;function le(e){return"__private_"+To+++"_"+e}function T(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}function Vt(e){return Object.entries(e).map(([t,n])=>({key:t,value:{stringValue:String(n)}}))}const Wr=1,Oo=No(5,2,12);function No(e,t,n){const r=[0];for(let o=0;o<n;o++){const i=Math.floor(e*t**o);r.push(i)}return r}var pe=le("exporter"),U=le("attributes"),x=le("metrics");class Do{constructor({exporter:t,attributes:n}){Object.defineProperty(this,pe,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:[]}),T(this,pe)[pe]=t,T(this,U)[U]=n!=null?n:{}}addAttributes(t){T(this,U)[U]=_(_({},T(this,U)[U]),t)}histogram({name:t,value:n,unit:r,bounds:o,attributes:i}){const a=Date.now()*1e6;T(this,x)[x].push({name:t,type:"histogram",value:n,unit:r,timeUnixNano:a,attributes:i,bounds:o})}counter({name:t,value:n,unit:r,attributes:o}){const i=Date.now()*1e6;T(this,x)[x].push({name:t,type:"counter",value:n,unit:r,timeUnixNano:i,attributes:o})}gauge({name:t,value:n,unit:r,attributes:o}){const i=Date.now()*1e6;T(this,x)[x].push({name:t,type:"gauge",value:n,unit:r,timeUnixNano:i,attributes:o})}async exportMetrics(){const t={};T(this,x)[x].forEach(r=>{switch(r.attributes=_(_({},T(this,U)[U]),r.attributes),r.type){case"histogram":Ro(t,r);break;case"counter":Mo(t,r);break;case"gauge":ko(t,r);break}});const n=Object.values(t);n.length!==0&&(T(this,x)[x]=[],await T(this,pe)[pe].exportMetrics(n))}}function Ro(e,t){var n;const{name:r,value:o,unit:i,timeUnixNano:a,attributes:s}=t,l=(n=t.bounds)!==null&&n!==void 0?n:Oo,c=new Array(l.length+1).fill(0);e[r]||(e[r]={name:r,unit:i||"1",histogram:{aggregationTemporality:Wr,dataPoints:[]}});for(let u=0;u<c.length;u++){const m=l[u];if(m===void 0)c[u]=1;else if(o<=m){c[u]=1;break}}e[r].histogram.dataPoints.push({startTimeUnixNano:a,timeUnixNano:a,count:1,sum:o,min:o,max:o,bucketCounts:c,explicitBounds:l,attributes:Vt(s!=null?s:{})})}function Mo(e,t){const{name:n,value:r,unit:o,timeUnixNano:i,attributes:a}=t;e[n]||(e[n]={name:n,unit:o||"1",sum:{aggregationTemporality:Wr,isMonotonic:!0,dataPoints:[]}}),e[n].sum.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,asDouble:r,attributes:Vt(a!=null?a:{})})}function ko(e,t){const{name:n,value:r,unit:o,timeUnixNano:i,attributes:a}=t;e[n]||(e[n]={name:n,unit:o||"1",gauge:{dataPoints:[]}}),e[n].gauge.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,asDouble:r,attributes:Vt(a!=null?a:{})})}var he=le("url"),fe=le("serviceName"),ye=le("logger");class xo{constructor(t,n,r){Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),T(this,he)[he]=t,T(this,fe)[fe]=n,T(this,ye)[ye]=r==null?void 0:r.logger}async exportMetrics(t){var n;const r={resourceMetrics:[{resource:{attributes:[{key:"service.name",value:{stringValue:T(this,fe)[fe]}}]},scopeMetrics:[{scope:{name:"open-telemetry-mini-client",version:"0.3.3",attributes:[]},metrics:t}]}]},o=await fetch(T(this,he)[he],{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if((n=T(this,ye)[ye])===null||n===void 0||n.log({status:o.status}),!o.ok){if(o.status===400){const i=await o.text();throw new ze("Invalid OpenTelemetry Metrics: ".concat(i))}if(o.status===429||o.status===503){const i=await o.json(),a=o.headers.get("Retry-After"),s=a?{seconds:Number(a)}:void 0;throw new ze("Server did not accept metrics",{errorData:i,retryAfter:s,metrics:t})}throw new ze("Server responded with ".concat(o.status))}}}class ze extends Error{constructor(t,n){super(t),this.metadata=void 0,this.name="OpenTelemetryClientError",this.metadata=n}}const Lo="https://otlp-http-production.shopifysvc.com/v1/metrics",$o="portable_wallets";class Uo{constructor(t){this.exporter=t}async exportMetrics(t){var n;try{await this.exporter.exportMetrics(t)}catch(r){if(r instanceof ze){const o=(n=r.metadata)==null?void 0:n.retryAfter;if(o){await new Promise(i=>{setTimeout(()=>{this.exportMetrics(t),i()},o.seconds*1e3)});return}}throw r}}}const Bo=new xo(Lo,$o),qo=new Uo(Bo),Y=new Do({exporter:qo});class xe extends Hr{constructor(){super(),w(this,"i18n"),w(this,"dataSource"),w(this,"apiClient"),w(this,"onRendered"),w(this,"setI18n"),w(this,"setDataSource"),w(this,"setApiClient"),w(this,"parsedWalletParams"),this.onRendered=()=>{},[this.i18n,this.setI18n]=this.createResolvablePromise(),[this.dataSource,this.setDataSource]=this.createResolvablePromise(),[this.apiClient,this.setApiClient]=this.createResolvablePromise()}attributeChangedCallback(t,n,r,o){n!==r&&t==="disabled"&&o&&(r?o.setAttribute("aria-disabled","true"):o.removeAttribute("aria-disabled"))}createResolvablePromise(){let t;return[new Promise(n=>t=n),t]}backgroundIsDark(){return Ao(this).isDark()}get walletParams(){var t;if(this.parsedWalletParams===void 0)try{this.parsedWalletParams=JSON.parse((t=this.getAttribute("wallet-params"))!=null?t:"{}")}catch(n){throw new Error("Error while parsing wallet-params JSON: ".concat(n))}return this.parsedWalletParams}redirectToCheckout(t){Y.exportMetrics(),window.location.assign(t)}}var Me={},at={},Dt=function(e,t){return Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Dt(e,t)};function zr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Dt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ye.apply(this,arguments)};function Kr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Gr(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function Yr(e,t){return function(n,r){t(n,r,e)}}function Fo(e,t,n,r,o,i){function a(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),m,f=!1,p=n.length-1;p>=0;p--){var v={};for(var d in r)v[d]=d==="access"?{}:r[d];for(var d in r.access)v.access[d]=r.access[d];v.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(y||null))};var h=(0,n[p])(s==="accessor"?{get:u.get,set:u.set}:u[l],v);if(s==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(m=a(h.get))&&(u.get=m),(m=a(h.set))&&(u.set=m),(m=a(h.init))&&o.unshift(m)}else(m=a(h))&&(s==="field"?o.unshift(m):u[l]=m)}c&&Object.defineProperty(c,r.name,u),f=!0}function jo(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function Vo(e){return typeof e=="symbol"?e:"".concat(e)}function Ho(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Zr(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Qr(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(u){try{c(r.next(u))}catch(m){a(m)}}function l(u){try{c(r.throw(u))}catch(m){a(m)}}function c(u){u.done?i(u.value):o(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})}function Jr(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var it=Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function Xr(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&it(t,e,n)}function Ze(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ht(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function en(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ht(arguments[t]));return e}function tn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function rn(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function ce(e){return this instanceof ce?(this.v=e,this):new ce(e)}function nn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(f){r[f]&&(o[f]=function(p){return new Promise(function(v,d){i.push([f,p,v,d])>1||s(f,p)})})}function s(f,p){try{l(r[f](p))}catch(v){m(i[0][3],v)}}function l(f){f.value instanceof ce?Promise.resolve(f.value.v).then(c,u):m(i[0][2],f)}function c(f){s("next",f)}function u(f){s("throw",f)}function m(f,p){f(p),i.shift(),i.length&&s(i[0][0],i[0][1])}}function on(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(a){return(n=!n)?{value:ce(e[o](a)),done:!1}:i?i(a):a}:i}}function an(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ze=="function"?Ze(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(a){return new Promise(function(s,l){a=e[i](a),o(s,l,a.done,a.value)})}}function o(i,a,s,l){Promise.resolve(l).then(function(c){i({value:c,done:s})},a)}}function sn(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Wo=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function cn(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&it(t,e,n);return Wo(t,e),t}function ln(e){return e&&e.__esModule?e:{default:e}}function un(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function dn(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function pn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function hn(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var zo=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function fn(e){function t(r){e.error=e.hasError?new zo(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function n(){for(;e.stack.length;){var r=e.stack.pop();try{var o=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(o).then(n,function(i){return t(i),n()})}catch(i){t(i)}}if(e.hasError)throw e.error}return n()}const Ko={__extends:zr,__assign:Ye,__rest:Kr,__decorate:Gr,__param:Yr,__metadata:Zr,__awaiter:Qr,__generator:Jr,__createBinding:it,__exportStar:Xr,__values:Ze,__read:Ht,__spread:en,__spreadArrays:tn,__spreadArray:rn,__await:ce,__asyncGenerator:nn,__asyncDelegator:on,__asyncValues:an,__makeTemplateObject:sn,__importStar:cn,__importDefault:ln,__classPrivateFieldGet:un,__classPrivateFieldSet:dn,__classPrivateFieldIn:pn,__addDisposableResource:hn,__disposeResources:fn},Go=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:hn,get __assign(){return Ye},__asyncDelegator:on,__asyncGenerator:nn,__asyncValues:an,__await:ce,__awaiter:Qr,__classPrivateFieldGet:un,__classPrivateFieldIn:pn,__classPrivateFieldSet:dn,__createBinding:it,__decorate:Gr,__disposeResources:fn,__esDecorate:Fo,__exportStar:Xr,__extends:zr,__generator:Jr,__importDefault:ln,__importStar:cn,__makeTemplateObject:sn,__metadata:Zr,__param:Yr,__propKey:Vo,__read:Ht,__rest:Kr,__runInitializers:jo,__setFunctionName:Ho,__spread:en,__spreadArray:rn,__spreadArrays:tn,__values:Ze,default:Ko},Symbol.toStringTag,{value:"Module"})),Le=Jn(Go);var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.extractDomain=O.PRODUCTION_CANADA_ENDPOINT=O.PRODUCE_ENDPOINT=O.PRODUCE_BATCH_ENDPOINT=O.PRODUCTION_DOMAIN=O.DEVELOPMENT_DOMAIN=void 0,O.DEVELOPMENT_DOMAIN="http://localhost:8082",O.PRODUCTION_DOMAIN="https://monorail-edge.shopifysvc.com",O.PRODUCE_BATCH_ENDPOINT="/unstable/produce_batch",O.PRODUCE_ENDPOINT="/v1/produce",O.PRODUCTION_CANADA_ENDPOINT="https://monorail-edge-ca.shopifycloud.com/v1/produce";function Yo(e){return"https://".concat(new URL(e).hostname)}O.extractDomain=Yo;var st={},ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.isCompositeMonorailEvent=void 0;function Zo(e){return e.schemaId!==void 0}ct.isCompositeMonorailEvent=Zo,Object.defineProperty(st,"__esModule",{value:!0}),st.ProducerMiddleware=void 0;var Qo=ct,Jo=function(){function e(t){this.producer=t}return e.prototype.do=function(t,n){return(0,Qo.isCompositeMonorailEvent)(t)?this.producer.produce(t):this.producer.produceBatch(t)},e}();st.ProducerMiddleware=Jo;var $e={},Ct={},me={},Ve={},or;function yn(){if(or)return Ve;or=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.default=n;let e;const t=new Uint8Array(16);function n(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Ve}var oe={},ge={},be={},ar;function Xo(){if(ar)return be;ar=1,Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return be.default=e,be}var ir;function lt(){if(ir)return ge;ir=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var e=t(Xo());function t(o){return o&&o.__esModule?o:{default:o}}function n(o){return typeof o=="string"&&e.default.test(o)}var r=n;return ge.default=r,ge}var sr;function ut(){if(sr)return oe;sr=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=void 0,oe.unsafeStringify=r;var e=t(lt());function t(a){return a&&a.__esModule?a:{default:a}}const n=[];for(let a=0;a<256;++a)n.push((a+256).toString(16).slice(1));function r(a,s=0){return(n[a[s+0]]+n[a[s+1]]+n[a[s+2]]+n[a[s+3]]+"-"+n[a[s+4]]+n[a[s+5]]+"-"+n[a[s+6]]+n[a[s+7]]+"-"+n[a[s+8]]+n[a[s+9]]+"-"+n[a[s+10]]+n[a[s+11]]+n[a[s+12]]+n[a[s+13]]+n[a[s+14]]+n[a[s+15]]).toLowerCase()}function o(a,s=0){const l=r(a,s);if(!(0,e.default)(l))throw TypeError("Stringified UUID is invalid");return l}var i=o;return oe.default=i,oe}var cr;function ea(){if(cr)return me;cr=1,Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var e=n(yn()),t=ut();function n(c){return c&&c.__esModule?c:{default:c}}let r,o,i=0,a=0;function s(c,u,m){let f=u&&m||0;const p=u||new Array(16);c=c||{};let v=c.node||r,d=c.clockseq!==void 0?c.clockseq:o;if(v==null||d==null){const I=c.random||(c.rng||e.default)();v==null&&(v=r=[I[0]|1,I[1],I[2],I[3],I[4],I[5]]),d==null&&(d=o=(I[6]<<8|I[7])&16383)}let h=c.msecs!==void 0?c.msecs:Date.now(),y=c.nsecs!==void 0?c.nsecs:a+1;const b=h-i+(y-a)/1e4;if(b<0&&c.clockseq===void 0&&(d=d+1&16383),(b<0||h>i)&&c.nsecs===void 0&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=h,a=y,o=d,h+=122192928e5;const g=((h&268435455)*1e4+y)%4294967296;p[f++]=g>>>24&255,p[f++]=g>>>16&255,p[f++]=g>>>8&255,p[f++]=g&255;const S=h/4294967296*1e4&268435455;p[f++]=S>>>8&255,p[f++]=S&255,p[f++]=S>>>24&15|16,p[f++]=S>>>16&255,p[f++]=d>>>8|128,p[f++]=d&255;for(let I=0;I<6;++I)p[f+I]=v[I];return u||(0,t.unsafeStringify)(p)}var l=s;return me.default=l,me}var ve={},V={},we={},lr;function mn(){if(lr)return we;lr=1,Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var e=t(lt());function t(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");let i;const a=new Uint8Array(16);return a[0]=(i=parseInt(o.slice(0,8),16))>>>24,a[1]=i>>>16&255,a[2]=i>>>8&255,a[3]=i&255,a[4]=(i=parseInt(o.slice(9,13),16))>>>8,a[5]=i&255,a[6]=(i=parseInt(o.slice(14,18),16))>>>8,a[7]=i&255,a[8]=(i=parseInt(o.slice(19,23),16))>>>8,a[9]=i&255,a[10]=(i=parseInt(o.slice(24,36),16))/1099511627776&255,a[11]=i/4294967296&255,a[12]=i>>>24&255,a[13]=i>>>16&255,a[14]=i>>>8&255,a[15]=i&255,a}var r=n;return we.default=r,we}var ur;function gn(){if(ur)return V;ur=1,Object.defineProperty(V,"__esModule",{value:!0}),V.URL=V.DNS=void 0,V.default=a;var e=ut(),t=n(mn());function n(s){return s&&s.__esModule?s:{default:s}}function r(s){s=unescape(encodeURIComponent(s));const l=[];for(let c=0;c<s.length;++c)l.push(s.charCodeAt(c));return l}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";V.DNS=o;const i="6ba7b811-9dad-11d1-80b4-00c04fd430c8";V.URL=i;function a(s,l,c){function u(m,f,p,v){var d;if(typeof m=="string"&&(m=r(m)),typeof f=="string"&&(f=(0,t.default)(f)),((d=f)===null||d===void 0?void 0:d.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+m.length);if(h.set(f),h.set(m,f.length),h=c(h),h[6]=h[6]&15|l,h[8]=h[8]&63|128,p){v=v||0;for(let y=0;y<16;++y)p[v+y]=h[y];return p}return(0,e.unsafeStringify)(h)}try{u.name=s}catch(m){}return u.DNS=o,u.URL=i,u}return V}var _e={},dr;function ta(){if(dr)return _e;dr=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;function e(p){if(typeof p=="string"){const v=unescape(encodeURIComponent(p));p=new Uint8Array(v.length);for(let d=0;d<v.length;++d)p[d]=v.charCodeAt(d)}return t(r(o(p),p.length*8))}function t(p){const v=[],d=p.length*32,h="0123456789abcdef";for(let y=0;y<d;y+=8){const b=p[y>>5]>>>y%32&255,g=parseInt(h.charAt(b>>>4&15)+h.charAt(b&15),16);v.push(g)}return v}function n(p){return(p+64>>>9<<4)+14+1}function r(p,v){p[v>>5]|=128<<v%32,p[n(v)-1]=v;let d=1732584193,h=-271733879,y=-1732584194,b=271733878;for(let g=0;g<p.length;g+=16){const S=d,I=h,k=y,N=b;d=l(d,h,y,b,p[g],7,-680876936),b=l(b,d,h,y,p[g+1],12,-389564586),y=l(y,b,d,h,p[g+2],17,606105819),h=l(h,y,b,d,p[g+3],22,-1044525330),d=l(d,h,y,b,p[g+4],7,-176418897),b=l(b,d,h,y,p[g+5],12,1200080426),y=l(y,b,d,h,p[g+6],17,-1473231341),h=l(h,y,b,d,p[g+7],22,-45705983),d=l(d,h,y,b,p[g+8],7,1770035416),b=l(b,d,h,y,p[g+9],12,-1958414417),y=l(y,b,d,h,p[g+10],17,-42063),h=l(h,y,b,d,p[g+11],22,-1990404162),d=l(d,h,y,b,p[g+12],7,1804603682),b=l(b,d,h,y,p[g+13],12,-40341101),y=l(y,b,d,h,p[g+14],17,-1502002290),h=l(h,y,b,d,p[g+15],22,1236535329),d=c(d,h,y,b,p[g+1],5,-165796510),b=c(b,d,h,y,p[g+6],9,-1069501632),y=c(y,b,d,h,p[g+11],14,643717713),h=c(h,y,b,d,p[g],20,-373897302),d=c(d,h,y,b,p[g+5],5,-701558691),b=c(b,d,h,y,p[g+10],9,38016083),y=c(y,b,d,h,p[g+15],14,-660478335),h=c(h,y,b,d,p[g+4],20,-405537848),d=c(d,h,y,b,p[g+9],5,568446438),b=c(b,d,h,y,p[g+14],9,-1019803690),y=c(y,b,d,h,p[g+3],14,-187363961),h=c(h,y,b,d,p[g+8],20,1163531501),d=c(d,h,y,b,p[g+13],5,-1444681467),b=c(b,d,h,y,p[g+2],9,-51403784),y=c(y,b,d,h,p[g+7],14,1735328473),h=c(h,y,b,d,p[g+12],20,-1926607734),d=u(d,h,y,b,p[g+5],4,-378558),b=u(b,d,h,y,p[g+8],11,-2022574463),y=u(y,b,d,h,p[g+11],16,1839030562),h=u(h,y,b,d,p[g+14],23,-35309556),d=u(d,h,y,b,p[g+1],4,-1530992060),b=u(b,d,h,y,p[g+4],11,1272893353),y=u(y,b,d,h,p[g+7],16,-155497632),h=u(h,y,b,d,p[g+10],23,-1094730640),d=u(d,h,y,b,p[g+13],4,681279174),b=u(b,d,h,y,p[g],11,-358537222),y=u(y,b,d,h,p[g+3],16,-722521979),h=u(h,y,b,d,p[g+6],23,76029189),d=u(d,h,y,b,p[g+9],4,-640364487),b=u(b,d,h,y,p[g+12],11,-421815835),y=u(y,b,d,h,p[g+15],16,530742520),h=u(h,y,b,d,p[g+2],23,-995338651),d=m(d,h,y,b,p[g],6,-198630844),b=m(b,d,h,y,p[g+7],10,1126891415),y=m(y,b,d,h,p[g+14],15,-1416354905),h=m(h,y,b,d,p[g+5],21,-57434055),d=m(d,h,y,b,p[g+12],6,1700485571),b=m(b,d,h,y,p[g+3],10,-1894986606),y=m(y,b,d,h,p[g+10],15,-1051523),h=m(h,y,b,d,p[g+1],21,-2054922799),d=m(d,h,y,b,p[g+8],6,1873313359),b=m(b,d,h,y,p[g+15],10,-30611744),y=m(y,b,d,h,p[g+6],15,-1560198380),h=m(h,y,b,d,p[g+13],21,1309151649),d=m(d,h,y,b,p[g+4],6,-145523070),b=m(b,d,h,y,p[g+11],10,-1120210379),y=m(y,b,d,h,p[g+2],15,718787259),h=m(h,y,b,d,p[g+9],21,-343485551),d=i(d,S),h=i(h,I),y=i(y,k),b=i(b,N)}return[d,h,y,b]}function o(p){if(p.length===0)return[];const v=p.length*8,d=new Uint32Array(n(v));for(let h=0;h<v;h+=8)d[h>>5]|=(p[h/8]&255)<<h%32;return d}function i(p,v){const d=(p&65535)+(v&65535);return(p>>16)+(v>>16)+(d>>16)<<16|d&65535}function a(p,v){return p<<v|p>>>32-v}function s(p,v,d,h,y,b){return i(a(i(i(v,p),i(h,b)),y),d)}function l(p,v,d,h,y,b,g){return s(v&d|~v&h,p,v,y,b,g)}function c(p,v,d,h,y,b,g){return s(v&h|d&~h,p,v,y,b,g)}function u(p,v,d,h,y,b,g){return s(v^d^h,p,v,y,b,g)}function m(p,v,d,h,y,b,g){return s(d^(v|~h),p,v,y,b,g)}var f=e;return _e.default=f,_e}var pr;function ra(){if(pr)return ve;pr=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var e=n(gn()),t=n(ta());function n(o){return o&&o.__esModule?o:{default:o}}var r=(0,e.default)("v3",48,t.default);return ve.default=r,ve}var Ce={},Ee={},hr;function na(){if(hr)return Ee;hr=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Ee.default=e,Ee}var fr;function oa(){if(fr)return Ce;fr=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=void 0;var e=r(na()),t=r(yn()),n=ut();function r(a){return a&&a.__esModule?a:{default:a}}function o(a,s,l){if(e.default.randomUUID&&!s&&!a)return e.default.randomUUID();a=a||{};const c=a.random||(a.rng||t.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){l=l||0;for(let u=0;u<16;++u)s[l+u]=c[u];return s}return(0,n.unsafeStringify)(c)}var i=o;return Ce.default=i,Ce}var Se={},Pe={},yr;function aa(){if(yr)return Pe;yr=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=void 0;function e(o,i,a,s){switch(o){case 0:return i&a^~i&s;case 1:return i^a^s;case 2:return i&a^i&s^a&s;case 3:return i^a^s}}function t(o,i){return o<<i|o>>>32-i}function n(o){const i=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const u=unescape(encodeURIComponent(o));o=[];for(let m=0;m<u.length;++m)o.push(u.charCodeAt(m))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const s=o.length/4+2,l=Math.ceil(s/16),c=new Array(l);for(let u=0;u<l;++u){const m=new Uint32Array(16);for(let f=0;f<16;++f)m[f]=o[u*64+f*4]<<24|o[u*64+f*4+1]<<16|o[u*64+f*4+2]<<8|o[u*64+f*4+3];c[u]=m}c[l-1][14]=(o.length-1)*8/Math.pow(2,32),c[l-1][14]=Math.floor(c[l-1][14]),c[l-1][15]=(o.length-1)*8&4294967295;for(let u=0;u<l;++u){const m=new Uint32Array(80);for(let y=0;y<16;++y)m[y]=c[u][y];for(let y=16;y<80;++y)m[y]=t(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);let f=a[0],p=a[1],v=a[2],d=a[3],h=a[4];for(let y=0;y<80;++y){const b=Math.floor(y/20),g=t(f,5)+e(b,p,v,d)+h+i[b]+m[y]>>>0;h=d,d=v,v=t(p,30)>>>0,p=f,f=g}a[0]=a[0]+f>>>0,a[1]=a[1]+p>>>0,a[2]=a[2]+v>>>0,a[3]=a[3]+d>>>0,a[4]=a[4]+h>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var r=n;return Pe.default=r,Pe}var mr;function ia(){if(mr)return Se;mr=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=void 0;var e=n(gn()),t=n(aa());function n(o){return o&&o.__esModule?o:{default:o}}var r=(0,e.default)("v5",80,t.default);return Se.default=r,Se}var Ae={},gr;function sa(){if(gr)return Ae;gr=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Ae.default=e,Ae}var Ie={},br;function ca(){if(br)return Ie;br=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;var e=t(lt());function t(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var r=n;return Ie.default=r,Ie}var vr;function la(){return vr||(vr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=u(ea()),n=u(ra()),r=u(oa()),o=u(ia()),i=u(sa()),a=u(ca()),s=u(lt()),l=u(ut()),c=u(mn());function u(m){return m&&m.__esModule?m:{default:m}}}(Ct)),Ct}Object.defineProperty($e,"__esModule",{value:!0}),$e.v4=void 0;function ua(){return typeof crypto=="object"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():la().v4()}$e.v4=ua;var dt={},K={};Object.defineProperty(K,"__esModule",{value:!0}),K.toUnderscoreCase=K.convertAllEventsToUnderscoreCase=K.convertStringToUnderscoreCase=void 0;var wr=Le;function Rt(e,t){return t===void 0&&(t=!0),e&&Object.keys(e).length&&t?Object.keys(e).map(function(n){var r;return r={},r[bn(n)]=e[n],r}).reduce(function(n,r){return wr.__assign(wr.__assign({},n),r)}):e}K.toUnderscoreCase=Rt;function bn(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}K.convertStringToUnderscoreCase=bn;function da(e){return e.events.map(function(t){var n=!0,r=!0;return t&&t.options&&Object.prototype.hasOwnProperty.call(t.options,"convertEventCase")&&(n=!!t.options.convertEventCase),t&&t.options&&Object.prototype.hasOwnProperty.call(t.options,"convertMetaDataCase")&&(r=!!t.options.convertMetaDataCase),{schema_id:t.schemaId,payload:Rt(t.payload,n),metadata:Rt(t.metadata,r)}})}K.convertAllEventsToUnderscoreCase=da;var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.MonorailRetriesExceededError=R.MonorailRequestError=R.MonorailBatchProduceError=R.MonorailUnableToProduceError=void 0;var pt=Le,pa=function(e){pt.__extends(t,e);function t(n){var r=e.call(this,"Error producing to the Monorail Edge. Response received: ".concat(JSON.stringify(n)))||this;return r.response=n,Object.setPrototypeOf(r,t.prototype),r}return t}(Error);R.MonorailUnableToProduceError=pa;var ha=function(e){pt.__extends(t,e);function t(n){var r=e.call(this,"Error producing to the Monorail Edge. Response received: ".concat(JSON.stringify(n)))||this;return Object.setPrototypeOf(r,t.prototype),r.response=n,r}return t}(Error);R.MonorailBatchProduceError=ha;var fa=function(e){pt.__extends(t,e);function t(n){var r=e.call(this,"Error completing request. A network failure may have prevented the request from completing. Error: ".concat(n))||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error);R.MonorailRequestError=fa;var ya=function(e){pt.__extends(t,e);function t(n){var r=e.call(this,"".concat(n))||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error);R.MonorailRetriesExceededError=ya,Object.defineProperty(dt,"__esModule",{value:!0}),dt.HttpProducer=void 0;var He=Le,We=O,Et=K,ma=$e,H=R,ga=function(){function e(t,n){t===void 0&&(t=We.DEVELOPMENT_DOMAIN),n===void 0&&(n=!1),this.edgeDomain=t,this.keepalive=n}return e.withEndpoint=function(t){return new e(We.extractDomain(t))},e.getHeadersFromMetadata=function(t){var n={"Content-Type":"application/json; charset=utf-8","X-Monorail-Edge-Event-Created-At-Ms":(t&&t.eventCreatedAtMs||Date.now()).toString(),"X-Monorail-Edge-Event-Sent-At-Ms":Date.now().toString(),"X-Monorail-Edge-Client-Message-Id":(t&&t.clientMessageId||(0,ma.v4)()).toString()};return t&&t.userAgent&&(n["User-Agent"]=t.userAgent),t&&t.remoteIp&&(n["X-Forwarded-For"]=t.remoteIp),n},e.prototype.produceBatch=function(t){return He.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s;return He.__generator(this,function(l){switch(l.label){case 0:n={events:(0,Et.convertAllEventsToUnderscoreCase)(t),metadata:(0,Et.toUnderscoreCase)(t.metadata)},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(this.produceBatchEndpoint(),{method:"post",headers:e.getHeadersFromMetadata(t.metadata),body:JSON.stringify(n),keepalive:this.keepalive})];case 2:return r=l.sent(),[3,4];case 3:throw o=l.sent(),new H.MonorailRequestError(o);case 4:return r.status!==207?[3,6]:[4,r.json()];case 5:throw i=l.sent(),new H.MonorailBatchProduceError(i);case 6:return r.ok?[3,8]:(a=H.MonorailUnableToProduceError.bind,s={status:r.status},[4,r.text()]);case 7:throw new(a.apply(H.MonorailUnableToProduceError,[void 0,(s.message=l.sent(),s)]));case 8:return[2,{status:r.status}]}})})},e.prototype.produce=function(t){return He.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s;return He.__generator(this,function(l){switch(l.label){case 0:n=!0,t&&t.options&&Object.prototype.hasOwnProperty.call(t.options,"convertEventCase")&&(n=!!t.options.convertEventCase),r={schema_id:t.schemaId,payload:(0,Et.toUnderscoreCase)(t.payload,n)},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(this.produceEndpoint(),{method:"post",headers:e.getHeadersFromMetadata(t.metadata),body:JSON.stringify(r),keepalive:this.keepalive})];case 2:return o=l.sent(),[3,4];case 3:throw i=l.sent(),new H.MonorailRequestError(i);case 4:if(!o)throw new H.MonorailUnableToProduceError({message:"No response from edge"});return o.ok?[3,6]:(a=H.MonorailUnableToProduceError.bind,s={status:o.status},[4,o.text()]);case 5:throw new(a.apply(H.MonorailUnableToProduceError,[void 0,(s.message=l.sent(),s)]));case 6:return[2,{status:o.status}]}})})},e.prototype.produceBatchEndpoint=function(){return this.edgeDomain+We.PRODUCE_BATCH_ENDPOINT},e.prototype.produceEndpoint=function(){return this.edgeDomain+We.PRODUCE_ENDPOINT},e}();dt.HttpProducer=ga;var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.LogProducer=void 0;var ba=function(){function e(t){this.sendToConsole=t,t&&e.printWelcomeMessage(t)}return e.printWelcomeMessage=function(t){console.log("%c\u{1F44B} from Monorail%c\n\n"+"We've noticed that you're".concat(t?"":" not"," ")+"running in debug mode. "+"As such, we will ".concat(t?"produce":"not produce"," ")+"Monorail events to the console. "+"\n\nIf you want Monorail events to ".concat(t?"stop":"start"," ")+"appearing here, %cset debugMode=".concat((!t).toString(),"%c, ")+"for the Monorail Log Producer in your code.","font-size: large;","font-size: normal;","font-weight: bold;","font-weight: normal;")},e.prototype.produce=function(t){return this.sendToConsole&&console.log("Monorail event produced",t),new Promise(function(n){n(t)})},e.prototype.produceBatch=function(t){return this.sendToConsole&&console.log("Monorail Batch event produced",t),new Promise(function(n){n(t)})},e}();ht.LogProducer=ba,Object.defineProperty(at,"__esModule",{value:!0}),at.Monorail=void 0;var va=Le,_r=O,wa=st,_a=$e,St=dt,Ca=ht,Ea=function(){function e(t,n){this.producer=t,this.middleware=n,this.executeChain=e.buildMiddlewareChain(this.middleware.concat(new wa.ProducerMiddleware(t)))}return e.createLogProducer=function(t){return new e(new Ca.LogProducer(t.debugMode),t.middleware||[])},e.createHttpProducerWithEndpoint=function(t,n){return n===void 0&&(n=[]),new e(St.HttpProducer.withEndpoint(t),n)},e.createHttpProducer=function(t){var n=t.options&&t.options.keepalive;return new e(t.production?new St.HttpProducer(_r.PRODUCTION_DOMAIN,n):new St.HttpProducer(_r.DEVELOPMENT_DOMAIN,n),t.middleware||[])},e.buildMiddlewareChain=function(t,n){var r=this;return n===void 0&&(n=0),n===t.length?this.identityFn:function(o){return t[n].do(o,r.buildMiddlewareChain(t,n+1))}},e.prototype.produce=function(t){return t.metadata=va.__assign({eventCreatedAtMs:Date.now(),clientMessageId:(0,_a.v4)()},t.metadata),this.executeChain(t)},e.prototype.produceBatch=function(t){return this.executeChain(t)},e}();at.Monorail=Ea;var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.RetryMiddleware=void 0;var Cr=Le,Er=R,Sa=function(){function e(t,n){t===void 0&&(t=3),n===void 0&&(n=150),this.maxRetries=t,this.delayMs=n}return e.prototype.do=function(t,n){return Cr.__awaiter(this,void 0,void 0,function(){var r,o,i,a,s;return Cr.__generator(this,function(l){switch(l.label){case 0:r=0,l.label=1;case 1:if(!(r<this.maxRetries))return[3,7];i=void 0,l.label=2;case 2:return l.trys.push([2,4,,6]),[4,n(t)];case 3:return i=l.sent(),[3,6];case 4:if(a=l.sent(),o=o||new Error,o=new Error("".concat(o.message," Retry count:").concat(r+1," Error msg:").concat(a.message,"\n")),a instanceof Er.MonorailUnableToProduceError&&(s=a.response.status,s&&s>=400&&s<500))throw a;return[4,this.delay(this.delayMs*Math.pow(2,r))];case 5:return l.sent(),r++,[3,1];case 6:return[2,i];case 7:throw o?o.message="Retry count of ".concat(this.maxRetries," exceeded. Failed with error: \n").concat(o.message," Aborting request for ").concat(JSON.stringify(t)):o=new Error,new Er.MonorailRetriesExceededError(o)}})})},e.prototype.delay=function(t){return new Promise(function(n){return setTimeout(n,t)})},e}();ft.RetryMiddleware=Sa,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RetryMiddleware=e.MonorailRetriesExceededError=e.MonorailUnableToProduceError=e.MonorailRequestError=e.Monorail=void 0;var t=at;Object.defineProperty(e,"Monorail",{enumerable:!0,get:function(){return t.Monorail}});var n=R;Object.defineProperty(e,"MonorailRequestError",{enumerable:!0,get:function(){return n.MonorailRequestError}}),Object.defineProperty(e,"MonorailUnableToProduceError",{enumerable:!0,get:function(){return n.MonorailUnableToProduceError}}),Object.defineProperty(e,"MonorailRetriesExceededError",{enumerable:!0,get:function(){return n.MonorailRetriesExceededError}});var r=ft;Object.defineProperty(e,"RetryMiddleware",{enumerable:!0,get:function(){return r.RetryMiddleware}})}(Me);const Pa=["Chrome-Lighthouse"];function Aa(){const e=navigator.userAgent;return Pa.some(t=>e.includes(t))}class Ia extends Error{constructor(t){super(t),w(this,"name","MonorailProducerError"),w(this,"code","monorail_producer_error")}}function*Ta(){yield Me.Monorail.createHttpProducer({production:!0}),Vr()&&(yield Me.Monorail.createLogProducer({debugMode:!0}))}const Oa=[...Ta()];function Na(e){var t;return!(e instanceof Me.MonorailRequestError)&&!((t=e==null?void 0:e.message)!=null&&t.includes("Invalid agent:"))}async function Da(e,t){if(Aa())return;E.leaveBreadcrumb("monorail event produced to ".concat(e.schemaId),e);const n=[];if(await Promise.all(Oa.map(async o=>{try{await o.produce(e)}catch(i){n.push(i)}})),n.length===0)return;const r=n.sort(o=>o instanceof Me.MonorailRequestError?1:-1)[0];if(t==null||t(r),Na(r)){const o=r instanceof Error?r:new Ia(Ra(r));E.notify(o)}}function Ra(e){try{return JSON.stringify(e)}catch(t){return e.toString()}}const Sr="shopify_wallet_checkout_track/6.1";async function q(e,t){var n,r,o,i,a,s,l,c,u,m,f,p;(r=(n=window==null?void 0:window.ShopifyAnalytics)==null?void 0:n.lib)!=null&&r.trekkie||await new Promise(ue=>{const Be=setInterval(()=>{var qe,jn;(jn=(qe=window==null?void 0:window.ShopifyAnalytics)==null?void 0:qe.lib)!=null&&jn.trekkie&&(clearInterval(Be),ue())},100),ds=setTimeout(()=>{clearInterval(Be),clearTimeout(ds),ue()},7e3)});const v=(a=(i=(o=window.ShopifyAnalytics)==null?void 0:o.lib)==null?void 0:i.trekkie)==null?void 0:a.defaultAttributes,d={uniqToken:(s=v==null?void 0:v.uniqToken)!=null?s:"",visitToken:(l=v==null?void 0:v.visitToken)!=null?l:"",microSessionId:(c=v==null?void 0:v.microSessionId)!=null?c:"",microSessionCount:(u=v==null?void 0:v.microSessionCount)!=null?u:0,shopId:(m=v==null?void 0:v.shopId)!=null?m:0,themeId:v==null?void 0:v.themeId,themeCityHash:(f=v==null?void 0:v.themeCityHash)!=null?f:"",contentLanguage:(p=v==null?void 0:v.contentLanguage)!=null?p:"",referer:v==null?void 0:v.referer},{uniqToken:h,visitToken:y,microSessionId:b,microSessionCount:g,shopId:S,themeId:I,themeCityHash:k,contentLanguage:N,referer:F}=d,{event:Z,eventSubtype:de,checkoutToken:Fe,instrumentId:J,ttl:Q}=e,Zt={schemaId:Sr,payload:{event:Z,eventSubtype:de,checkoutToken:Fe,appName:"storefront",pageType:_o(),instrumentId:J,ttl:Q,uniqToken:h,visitToken:y,microSessionId:b,microSessionCount:g,shopId:S,themeId:I,themeCityHash:k,contentLanguage:N,referer:F,checkoutOne:!0}};if(!Z){E.notify(new Error("Event is required"),{metadata:{request:{monorail:{schemaId:Sr,payload:JSON.stringify(Zt)}}}});return}await Da(Zt,t)}var P=(e=>(e.BuyItNow="BuyItNow",e.MoreOptions="MoreOptions",e.ApplePay="ApplePay",e.PayPal="PayPalV5",e.Venmo="Venmo",e.GooglePay="GooglePay",e.ShopPay="ShopifyPay",e.MetaPay="FacebookPay",e.BuyWithPrime="BuyWithPrime",e))(P||{}),M=(e=>(e.CartInitCalled="portable_wallets_cart_init_called",e.ClickSheetCancelled="portable_wallets_instrument_click_sheet_cancelled",e.ClickSheetFailed="portable_wallets_instrument_click_sheet_failure",e.ClickSheetSuccess="portable_wallets_instrument_click_sheet_success",e.InitCalled="portable_wallets_init_called",e.InitFailed="portable_wallets_init_failed",e.InitSuccess="portable_wallets_init_success",e.UpdateFailed="portable_wallets_instrument_update_failed",e.InstrumentLoaded="portable_wallets_instrument_loaded",e))(M||{});function Ma(e){const t=n=>{n.persisted&&(e(),window.removeEventListener("pageshow",t))};window.addEventListener("pageshow",t)}function ka(){q({event:M.InitCalled})}function xa({result:e,eventType:t}){Y.counter({name:"portable_wallets_init_completed",value:1,attributes:{result:e,eventType:t}}),q({event:e==="success"?M.InitSuccess:M.InitFailed,eventSubtype:t})}function La({instrument:e,measurement:t}){t!=null&&Y.histogram({name:"portable_wallets_instrument_load_time",value:t,attributes:{instrument:e},unit:"ms"}),q({event:M.InstrumentLoaded,instrumentId:e,ttl:t})}function $a({instrument:e,result:t,checkoutToken:n}){Y.counter({name:"portable_wallets_sheet_clicked",value:1,attributes:{instrument:e,result:t}}),q({event:t==="success"?M.ClickSheetSuccess:M.ClickSheetFailed,checkoutToken:n,instrumentId:e})}function Ua(e,t){q({event:"".concat(M.UpdateFailed,"-").concat(t),instrumentId:e})}function Ba(e){Y.counter({name:"portable_wallets_sheet_cancelled",value:1,attributes:{instrument:e}}),q({event:M.ClickSheetCancelled,instrumentId:e})}function qa(e){Y.counter({name:"portable_wallets_sheet_success",value:1,attributes:{instrument:e}}),Y.exportMetrics(),q({event:M.ClickSheetSuccess,instrumentId:e})}function Fa(){window.setInterval(()=>{Y.exportMetrics()},1e3)}const A={initStarted:W(ka),initCompleted:W(xa),instrumentLoaded:W(La),sheetClicked:W($a),updateFailed:W(Ua),sheetCancelled:W(Ba),sheetSuccess:W(qa),startExporter:W(Fa)};function W(e){return(...t)=>{try{e(...t)}catch(n){E.notify(n)}}}class ja extends Error{constructor(t){super("[".concat(t.name,"] ").concat(t.message)),this.stack=t.stack,this.name="HandleCreateCartError"}}async function Wt({element:e,instrumentName:t,onError:n,dataSource:r}){try{const o=await r.getCart();if(Ma(()=>{e&&(e.disabled=!1)}),!o||!o.id)throw new Error("[".concat(t,"] received invalid cart"));if(!o.checkoutUrl)throw new Error("[".concat(t,"] Created cart with no checkout URL"));return o}catch(o){if(E.notify(new ja(o)),A.sheetClicked({instrument:t,result:"failed"}),e.disabled=!1,n)return n==null||n(),null;throw o}}class Va extends xe{constructor(){super(...arguments),w(this,"anchor")}static get observedAttributes(){return["disabled"]}async connectedCallback(){this.render()}attributeChangedCallback(t,n,r){n!==r&&t==="disabled"&&this.anchor&&(r?this.anchor.setAttribute("disabled","true"):this.anchor.removeAttribute("disabled"))}async handleClick(t){if(t.preventDefault(),this.disabled||!this.anchor||this.anchor.getAttribute("disabled"))return;this.disabled=!0;const[n,r]=await Promise.all([this.i18n,this.dataSource]),o=await Wt({element:this,instrumentName:P.MoreOptions,onError:()=>jt(n.translate("error_dialogs.checkout.title"),n.translate("error_dialogs.checkout.generic_error")),dataSource:r});o&&this.redirectToCheckout(o.checkoutUrl)}async render(){this.anchor=document.createElement("a"),this.anchor.href="",this.anchor.textContent=(await this.i18n).translate("more_payment_options"),this.anchor.className=qt.MORE_PAYMENT_OPTION_BUTTON,this.disabled&&this.anchor.setAttribute("disabled","true"),this.anchor.onclick=t=>this.handleClick(t),this.appendChild(this.anchor)}}class Ha extends Error{constructor({code:t,message:n}){super(n),w(this,"name","DeveloperError"),w(this,"code","unknown"),this.code=t}}class Wa extends Error{constructor(){super(...arguments),w(this,"name","MissingConfigError")}}class zt extends Hr{get shopId(){return this.getAttribute("shop-id")}get cartId(){return this.getAttribute("cart-id")}get walletConfigs(){return this.getAttribute("wallet-configs")}get variantParams(){var t;try{return JSON.parse((t=this.getAttribute("variant-params"))!=null?t:"[]")}catch(n){throw new Ha({code:"invalid-variant-params",message:"variant-params must be a valid JSON string"})}}triggerLoadedEvent(){document.dispatchEvent(new Event("shopify:payment_button:loaded",{bubbles:!0,cancelable:!0}))}}const Te=Element.prototype,za="once";function Pr(e){const t=wn(e);return vn(t)}function vn(e){var t;const n=e==null?void 0:e.elements;if(!n)return null;const r=Ke(n,"id");if(!r||isNaN(Number(r)))return null;const o=Number((t=Ke(n,"quantity"))!=null?t:"1"),i="gid://shopify/ProductVariant/".concat(r),a=Ke(n,"selling_plan"),s=a?"gid://shopify/SellingPlan/".concat(a):void 0,l=Ga(e);return{variantId:r,quantity:o,merchandiseId:i,sellingPlanId:s,lineItemProperties:l}}function wn(e){const t=Ar(e,"[data-shopify='payment-button']")||document.querySelector("[data-shopify='payment-button']");return Ar(t,"form")}function Ka(e){const t=e==null?void 0:e.elements;if(!t)return!1;const n=Ke(t,"sellingPlan-Group");return!!(n&&n!==za)}function Ga(e){if(!e)return{};const t=document.querySelectorAll('[name^="properties"][form^="'.concat(e.getAttribute("id"),'"]')),n=e.querySelectorAll('[name^="properties"]'),r=[...t,...n],o={};return r.forEach(i=>{const a=Ya(i),s=Za(i);a&&typeof s<"u"&&(o[a]=s)}),o}function Ya(e){const t=e.getAttribute("name");if(t===null)return null;const n=t.indexOf("["),r=t.lastIndexOf("]");return n===-1||r===-1?null:t.substring(n+1,r)}function Za(e){if(!(["radio","checkbox"].includes(e.type)&&!e.checked)&&!(e.value===""||typeof e.value>"u"))return e.value}function Ke(e,t){var n;const r=e.namedItem(t);return r&&"value"in r&&(n=r.value)!=null?n:null}function Ar(e,t){if(Te.matches=Te.matches||Te.webkitMatchesSelector||Te.msMatchesSelector||Te.mozMatchesSelector,!e||e.matches(t))return e;let n=e;for(;n&&n!==document.body;)if(n=n.parentElement,n&&n.matches(t))return n;return null}class Qa{constructor(t,n,r){w(this,"addToCartMutationObserver"),w(this,"addToCartForm"),w(this,"addToCartButtons"),this.element=t,this.setComponentDisabled=n,this.setSubscriptionRequirement=r,this.addToCartMutationObserver=null,this.addToCartForm=null,this.addToCartButtons=[]}setupMutationObservers(){if(this.findAndSetAddToCartButtons(),!this.addToCartForm)return;this.syncComponentStateWithForm();const t=new MutationObserver(()=>this.reobserveOnFormChanges());this.addToCartMutationObserver=new MutationObserver(()=>this.syncComponentStateWithForm()),t.observe(this.addToCartForm,{childList:!0}),this.observeAddToCartButtons()}syncComponentStateWithForm(){if(!this.addToCartForm){this.setComponentDisabled(!0);return}const t=vn(this.addToCartForm),n=!!(this.addToCartButtons.length>0&&this.addToCartButtons.every(o=>o.disabled));this.setComponentDisabled(n||t===null);const r=Ka(this.addToCartForm);this.setSubscriptionRequirement(r)}observeAddToCartButtons(){this.addToCartButtons.forEach(t=>{this.addToCartMutationObserver.observe(t,{attributes:!0})})}reobserveOnFormChanges(){var t;(t=this.addToCartMutationObserver)==null||t.disconnect(),this.findAndSetAddToCartButtons(),this.observeAddToCartButtons(),this.syncComponentStateWithForm()}findAndSetAddToCartButtons(){this.addToCartForm=wn(this.element),this.addToCartForm&&(this.addToCartButtons=[...this.addToCartForm.querySelectorAll("[type=submit]")])}}class Ja extends xe{constructor(){super(...arguments),w(this,"button",null),w(this,"buyNowText","")}static get observedAttributes(){return["disabled"]}async connectedCallback(){this.buyNowText=(await this.i18n).translate("instruments_copy.checkout.buy_now"),this.render()}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async handleClick(){if(this.disabled||!this.button||this.button.getAttribute("aria-disabled"))return;this.disabled=!0;const[t,n]=await Promise.all([this.i18n,this.dataSource]),r=await Wt({element:this,instrumentName:P.BuyItNow,dataSource:n,onError:()=>jt(t.translate("error_dialogs.checkout.title"),t.translate("error_dialogs.checkout.generic_error"))});r&&(A.sheetClicked({instrument:P.BuyItNow,checkoutToken:Co(r),result:"success"}),this.redirectToCheckout(r.checkoutUrl))}render(){var t;this.button||(this.button=document.createElement("button"),this.button.type="button"),this.button.textContent=this.buyNowText,this.button.className=qt.UNBRANDED_BUTTON,this.disabled&&this.button.setAttribute("aria-disabled","true"),this.button.onclick=()=>this.handleClick(),this.appendChild(this.button),(t=this.onRendered)==null||t.call(this)}}class yt{constructor(t,n){w(this,"walletParams"),w(this,"options"),this.options=n,this.walletParams=t.wallet_params}static walletName(){throw new Error("Must define walletName for WalletInstrument subclass")}createWebComponent({accessToken:t,country:n,disabled:r="false",dataSource:o,i18n:i,apiClient:a,currency:s}){var l;const c=this.getWebComponentName();te(c,this.getWebComponentClass(),{isChildCustomElement:!0});const u=document.createElement(c),m={"access-token":t,"buyer-country":n,"buyer-currency":s,disabled:r,"wallet-params":JSON.stringify((l=this.walletParams)!=null?l:{})};for(const[f,p]of Object.entries(m))f&&u.setAttribute(f,p||"");return u.setDataSource(o),u.setApiClient(a),u.setI18n(i),u}loadWalletSDK(){return Promise.resolve()}getLoadEligibility(){return{eligible:!0}}getPartnerSDKEligibility(){return{eligible:!0}}}class Xa extends yt{static walletName(){return"buy_it_now"}getWebComponentName(){return"shopify-buy-it-now-button"}getInstrumentName(){return P.BuyItNow}getWebComponentClass(){return Ja}}class ei extends xe{constructor(){super(...arguments),w(this,"sdkButtonsComponent")}async connectedCallback(){var t,n;this.sdkButtonsComponent=(n=(t=window.paypal).Buttons)==null?void 0:n.call(t,{fundingSource:"paypal",style:{color:"gold",label:"paypal",height:54}}),this.render()}disconnectedCallback(){this.sdkButtonsComponent&&this.sdkButtonsComponent.close()}render(){var t;const n=document.createElement("div");(t=this.sdkButtonsComponent)==null||t.render(n),this.appendChild(n)}}const ti="https://www.paypal.com/sdk/js",ri="AftTXN0blRv0ltUpXOXhTWgUgyoMXw83iV54WUwm2VFXevA-_z4oWajYoxeWwZ-Y_mK1kxIBBXG0HqQ1";class ni extends yt{static walletName(){return"paypal"}constructor(t){super(t)}getWebComponentName(){return"shopify-paypal-button"}getInstrumentName(){return P.PayPal}getWebComponentClass(){return ei}loadWalletSDK(){const t=document.createElement("script"),n=new URL(ti);return n.searchParams.set("client-id",ri),n.searchParams.set("merchant-id",this.walletParams.merchantId),t.setAttribute("src",n.toString()),new Promise((r,o)=>{t.onload=()=>r(),t.onerror=i=>{document.body.removeChild(t),o(i)},document.body.appendChild(t)})}getLoadEligibility(){return{eligible:!0}}getPartnerSDKEligibility(){var t,n;return(n=(t=window==null?void 0:window.paypal)==null?void 0:t.Buttons)!=null&&n.call(t).isEligible()?{eligible:!0}:{eligible:!1,reason:"failed PayPal SDK eligibility check"}}}const oi=".apple-pay-button{background-size:100% 60%;background-repeat:no-repeat;background-position:50% 50%}@supports (-webkit-appearance: -apple-pay-button){.apple-pay-button{background-size:auto;background-repeat:repeat;background-position:0;-webkit-appearance:-apple-pay-button!important;-moz-appearance:-apple-pay-button!important;appearance:-apple-pay-button!important;-apple-pay-button-type:buy}.apple-pay-button-black{-apple-pay-button-style:black}.apple-pay-button-white{-apple-pay-button-style:white}}\n",Mt={UK:"GB",JA:"JP"},_n=["AS","GU","MP","PR","VI"];_n.forEach(e=>{Mt[e]="US"});function Ge(e){var t,n;const r=e.countryCode,o={firstName:e.givenName||void 0,lastName:e.familyName||void 0,address1:(t=e==null?void 0:e.addressLines)==null?void 0:t[0],address2:((n=e==null?void 0:e.addressLines)==null?void 0:n[1])||void 0,city:e.locality||void 0,postalCode:e.postalCode||void 0,zoneCode:e.administrativeArea||e.subLocality||void 0,countryCode:ii(e.countryCode),phone:e.phoneNumber||void 0};return o.countryCode==="HK"&&(o.postalCode=void 0,o.zoneCode=e.postalCode),r&&_n.includes(r)&&(o.zoneCode=r),o.lastName||(o.lastName=o.firstName),o}function ai(e){const t=Ge(e);return t.zip=t.postalCode,t.province=t.zoneCode,t.country=t.countryCode,delete t.postalCode,delete t.zoneCode,delete t.countryCode,t}function ii(e){if(!e)return"ZZ";const t=e.toUpperCase();return Object.keys(Mt).includes(t)?Mt[t]:t}function Pt(e,t){return ae(e,[t])[0]}function At({subtotal:e,selectedDeliveryOptions:t,duties:n,taxes:r,discountAllocations:o,i18n:i}){var a;const s=ae(i.translate("order_summary.subtotal"),[e]),l=ae(i.translate("order_summary.shipping"),t.map(f=>({amount:f.estimatedCost.amount}))),c=ae(i.translate("order_summary.duties"),[n]),u=ae(i.translate("order_summary.taxes"),[r]),m=(a=o==null?void 0:o.flatMap(f=>ae(i.translate("order_summary.discount"),[f.discountedAmount],!0)))!=null?a:[];return[...s,...l,...c,...u,...m]}function ae(e,t,n=!1){return t.filter(r=>(r==null?void 0:r.amount)&&(r==null?void 0:r.amount)!==0).map(r=>({label:e,amount:n?"-".concat(Nt(r.amount)):Nt(r.amount)}))}function si(e){return e.map(t=>{var n;return{label:t.title||"",amount:Nt(t.estimatedCost.amount),identifier:t.handle,detail:(n=t.description)!=null?n:""}})}const Oe=async({paymentSheetAction:e,onProceed:t,terminateSession:n})=>{switch(e.action){case"abort":n();break;case"show_error":await t(e.errors);break;case"update":await t(e.errors);break;default:throw new Error('Missing handler for payment sheet action "'.concat(e.action,'"'))}};var C=(e=>(e.InvalidLanguage="Variable $language of type LanguageCode was provided invalid value",e.InvalidCountry="Variable $country of type CountryCode was provided invalid value",e.MissingCartId="Variable $cartId of type ID! was provided invalid value",e.BuyerIdentityInvalidCountry="Variable $buyerIdentity of type CartBuyerIdentityInput! was provided invalid value for countryCode",e.BuyerIdentityInvalidPhone="INVALID: buyerIdentity.phone",e.BuyerIdentityEmailRequired="BUYER_IDENTITY_EMAIL_REQUIRED",e.DeliveryFirstNameInvalid="DELIVERY_FIRST_NAME_INVALID",e.DeliveryFirstNameRequired="DELIVERY_FIRST_NAME_REQUIRED",e.DeliveryLastNameInvalid="DELIVERY_LAST_NAME_INVALID",e.DeliveryLastNameRequired="DELIVERY_LAST_NAME_REQUIRED",e.DeliveryAddress1Required="DELIVERY_ADDRESS1_REQUIRED",e.DeliveryAddress1Invalid="DELIVERY_ADDRESS1_INVALID",e.DeliveryAddress2Required="DELIVERY_ADDRESS2_REQUIRED",e.DeliveryAddress2Invalid="DELIVERY_ADDRESS2_INVALID",e.DeliveryCityRequired="DELIVERY_CITY_REQUIRED",e.DeliveryCityInvalid="DELIVERY_CITY_INVALID",e.DeliveryZoneNotFound="DELIVERY_ZONE_NOT_FOUND",e.DeliveryZoneRequiredForCountry="DELIVERY_ZONE_REQUIRED_FOR_COUNTRY",e.DeliveryPostalCodeInvalid="DELIVERY_POSTAL_CODE_INVALID",e.DeliveryInvalidPostalCodeForZone="DELIVERY_INVALID_POSTAL_CODE_FOR_ZONE",e.DeliveryInvalidPostalCodeForCountry="DELIVERY_INVALID_POSTAL_CODE_FOR_COUNTRY",e.DeliveryPostalCodeRequired="DELIVERY_POSTAL_CODE_REQUIRED",e.DeliveryCountryInvalid="INVALID: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.country",e.DeliveryPhoneNumberRequired="DELIVERY_PHONE_NUMBER_REQUIRED",e.DeliveryPhoneNumberInvalid="DELIVERY_PHONE_NUMBER_INVALID",e.MerchandiseOutOfStock="MERCHANDISE_OUT_OF_STOCK",e.UnacceptablePaymentsAmount="PAYMENTS_UNACCEPTABLE_PAYMENT_AMOUNT",e.DeliveryNotAvailable="DELIVERY_NO_DELIVERY_AVAILABLE",e))(C||{});const ci=["abort","show_error","complete","update"];class li{constructor(){w(this,"generatePrioritizedPaymentSheetAction",(t,n)=>{let r;const o=[],i=[],a=[],s=n.filter(c=>c!==C.UnacceptablePaymentsAmount).some(c=>t[c]!==void 0);for(const c of Object.keys(t))if(!(c===C.UnacceptablePaymentsAmount&&s)){const u=t[c]();u.effects&&i.push(...u.effects),u.action!=="complete"&&u.errors&&a.push(...u.errors),o.push(u)}const l=(c=>ci.map(u=>c.find(m=>m.action===u)).find(u=>!!u))(o);return l&&(r=l,r.effects=i,r.action!=="complete"&&(r.errors=a)),r})}getMergedPaymentSheetAction({result:t,errorActions:n}){const r={};n.forEach(i=>{i.errors.forEach(a=>{t.errors.includes(a)&&(r[a]=i.generateAction)})});let o;for(const i of t.errors){const a=r[i];if(a){o=a();break}}return{firstPaymentSheetAction:o,prioritizedPaymentSheetAction:this.generatePrioritizedPaymentSheetAction(r,t.errors)}}getUnhandledErrors(t,n){const r=n.flatMap(o=>o.errors);return t.filter(o=>!r.includes(o))}}class ui extends li{constructor(t){super(),this.i18n=t}mapMutationResultToPaymentSheetAction(t,n){var r;const o=this.getErrorActions();if(this.getUnhandledErrors(t.errors,o).forEach(a=>{E.notify(new Error("[".concat(P.ApplePay,"] mutation result error not handled: ").concat(a)))}),((r=t.data)==null?void 0:r.deliveryOptions.length)===0&&n)return{action:"show_error",errors:[new ApplePayError("addressUnserviceable")]};const{firstPaymentSheetAction:i}=this.getMergedPaymentSheetAction({result:t,errorActions:o});return i||{action:"update",errors:[]}}mapCompletionResultToPaymentSheetAction(t){if(!t.data)throw new Error("[".concat(P.ApplePay,"] completion returned null result"));switch(t.data.__typename){case"SubmitSuccess":return{action:"complete",redirectUrl:t.data.redirectUrl};case"SubmitAlreadyAccepted":case"SubmitThrottled":case"SubmitFailed":{const n=this.getErrorActions();this.getUnhandledErrors(t.errors,n).forEach(o=>{E.notify(new Error("[".concat(P.ApplePay,"] completion result error not handled: ").concat(o)))});const{prioritizedPaymentSheetAction:r}=this.getMergedPaymentSheetAction({result:t,errorActions:n});return r||{action:"abort"}}default:throw new Error("[".concat(P.ApplePay,"] unknown completion result type: ").concat(t.data.__typename))}}getErrorActions(){return[{errors:[C.InvalidLanguage],generateAction:()=>({action:"abort",effects:[()=>{E.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid language, aborting")))}]})},{errors:[C.InvalidCountry],generateAction:()=>({action:"abort",effects:[()=>{E.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid country, aborting")))}]})},{errors:[C.MissingCartId],generateAction:()=>({action:"abort",effects:[()=>{E.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid cart ID, aborting")))}]})},{errors:[C.UnacceptablePaymentsAmount],generateAction:()=>({action:"abort"})},{errors:[C.MerchandiseOutOfStock],generateAction:()=>({action:"abort"})},{errors:[C.DeliveryNotAvailable],generateAction:()=>({action:"show_error",errors:[new ApplePayError("addressUnserviceable")]})},{errors:[C.BuyerIdentityEmailRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.i18n.translate("errors.missing.email"))]})},{errors:[C.DeliveryFirstNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.first_name"))]})},{errors:[C.DeliveryFirstNameInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.first_name"))]})},{errors:[C.DeliveryLastNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.last_name"))]})},{errors:[C.DeliveryLastNameInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.last_name"))]})},{errors:[C.DeliveryAddress1Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address1"))]})},{errors:[C.DeliveryAddress1Invalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address1"))]})},{errors:[C.DeliveryAddress2Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address2"))]})},{errors:[C.DeliveryAddress2Invalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address2"))]})},{errors:[C.DeliveryCityRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.missing.city"))]})},{errors:[C.DeliveryCityInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.invalid.city"))]})},{errors:[C.DeliveryZoneRequiredForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.i18n.translate("errors.missing.zone"))]})},{errors:[C.DeliveryZoneNotFound],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.i18n.translate("errors.invalid.zone"))]})},{errors:[C.DeliveryPostalCodeRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.missing.postal_code"))]})},{errors:[C.DeliveryPostalCodeInvalid,C.DeliveryInvalidPostalCodeForZone,C.DeliveryInvalidPostalCodeForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.invalid.postal_code"))]})},{errors:[C.DeliveryPhoneNumberRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.missing.phone"))]})},{errors:[C.DeliveryPhoneNumberInvalid,C.BuyerIdentityInvalidPhone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.invalid.phone"))]})},{errors:[C.BuyerIdentityInvalidCountry,C.DeliveryCountryInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.i18n.translate("errors.invalid.country"))]})}]}}const Ir=["name","postalAddress"];function di({shippingRequired:e,walletParams:t,buyerCurrency:n}){const{phoneRequired:r,emailRequired:o}=t,i=[...o?["email"]:[],...r?["phone"]:[]],a=e?[...Ir,...i]:i;return{countryCode:t.countryCode,currencyCode:n,merchantCapabilities:t.merchantCapabilities,supportedNetworks:t.supportedNetworks,total:{type:"pending",label:t.merchantName,amount:"1.00"},requiredBillingContactFields:Ir,requiredShippingContactFields:a,shippingType:t.shippingType}}const mt="GraphQL Client",Tr=0,Or=3,Cn="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",En="Response returned unexpected Content-Type:",Sn="An unknown error has occurred. The API did not return a data object or any errors in its response.",kt={json:"application/json",multipart:"multipart/mixed"},Pn=1e3,pi=[429,503],An=/@(defer)\b/i,Nr="\r\n",hi=/boundary="?([^=";]+)"?/i,Dr=Nr+Nr;function G(e,t=mt){return e.startsWith("".concat(t))?e:"".concat(t,": ").concat(e)}function se(e){return e instanceof Error?e.message:JSON.stringify(e)}function Rr(e){return e instanceof Error&&e.cause?e.cause:void 0}function Mr(e){return e.map(({errors:t})=>t).filter(t=>t&&t.length>0).flat()}function In({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Tr||t>Or))throw new Error("".concat(e,': The provided "retries" value (').concat(t,") is invalid - it cannot be less than ").concat(Tr," or greater than ").concat(Or))}function D(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function Tn(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:Tn(e,n)}function On(e,t){return Object.keys(t||{}).reduce((n,r)=>(typeof t[r]=="object"||Array.isArray(t[r]))&&e[r]?(n[r]=On(e[r],t[r]),n):(n[r]=t[r],n),Array.isArray(e)?[...e]:_({},e))}function kr(e){return e.reduce((t,n,r)=>r===0?_({},n):On(t,n),{})}function fi({clientLogger:e,customFetchApi:t=fetch,client:n=mt,defaultRetryWaitTime:r=Pn,retriableCodes:o=pi}){const i=async(a,s,l)=>{const c=s+1,u=l+1;let m;try{if(m=await t(...a),e({type:"HTTP-Response",content:{requestParams:a,response:m}}),!m.ok&&o.includes(m.status)&&c<=u)throw new Error;return m}catch(f){if(c<=u){const p=m==null?void 0:m.headers.get("Retry-After");return await yi(p?parseInt(p,10):r),e({type:"HTTP-Retry",content:{requestParams:a,lastResponse:m,retryAttempt:s,maxRetries:l}}),i(a,c,l)}throw new Error(G("".concat(l>0?"Attempted maximum number of ".concat(l," network retries. Last message - "):"").concat(se(f)),n))}};return i}async function yi(e){return new Promise(t=>setTimeout(t,e))}function mi({headers:e,url:t,customFetchApi:n=fetch,retries:r=0,logger:o}){In({client:mt,retries:r});const i={headers:e,url:t,retries:r},a=gi(o),s=fi({customFetchApi:n,clientLogger:a,defaultRetryWaitTime:Pn}),l=bi(s,i),c=vi(l),u=Ci(l);return{config:i,fetch:l,request:c,requestStream:u}}function gi(e){return t=>{e&&e(t)}}async function Nn(e){const{errors:t,data:n,extensions:r}=await e.json();return _(_(_({},D("data",n)),D("extensions",r)),t||!n?{errors:L(_({networkStatusCode:e.status,message:G(t?Cn:Sn)},D("graphQLErrors",t)),{response:e})}:{})}function bi(e,{url:t,headers:n,retries:r}){return async(o,i={})=>{const{variables:a,headers:s,url:l,retries:c}=i,u=JSON.stringify({query:o,variables:a});In({client:mt,retries:c});const m=Object.entries(_(_({},n),s)).reduce((p,[v,d])=>(p[v]=Array.isArray(d)?d.join(", "):d.toString(),p),{}),f=[l!=null?l:t,{method:"POST",headers:m,body:u}];return e(f,1,c!=null?c:r)}}function vi(e){return async(...t)=>{if(An.test(t[0]))throw new Error(G("This operation will result in a streamable response - use requestStream() instead."));try{const n=await e(...t),{status:r,statusText:o}=n,i=n.headers.get("content-type")||"";return n.ok?i.includes(kt.json)?Nn(n):{errors:{networkStatusCode:r,message:G("".concat(En," ").concat(i)),response:n}}:{errors:{networkStatusCode:r,message:G(o),response:n}}}catch(n){return{errors:{message:se(n)}}}}}function wi(e){return ne(this,null,function*(){if(e.body[Symbol.asyncIterator])try{for(var t=X(e.body),n,r,o;n=!(r=yield new $(t.next())).done;n=!1)yield r.value.toString()}catch(i){o=[i]}finally{try{n&&(r=t.return)&&(yield new $(r.call(t)))}finally{if(o)throw o[0]}}else{const i=e.body.getReader(),a=new TextDecoder;let s;try{for(;!(s=yield new $(i.read())).done;)yield a.decode(s.value)}finally{i.cancel()}}})}function _i(e,t){return{[Symbol.asyncIterator](){return ne(this,null,function*(){try{let a="";try{for(var n=X(e),r,o,i;r=!(o=yield new $(n.next())).done;r=!1){const s=o.value;if(a+=s,a.indexOf(t)>-1){const l=a.lastIndexOf(t),c=a.slice(0,l).split(t).filter(u=>u.trim().length>0).map(u=>u.slice(u.indexOf(Dr)+Dr.length).trim());c.length>0&&(yield c),a=a.slice(l+t.length),a.trim()==="--"&&(a="")}}}catch(s){i=[s]}finally{try{r&&(o=n.return)&&(yield new $(o.call(n)))}finally{if(i)throw i[0]}}}catch(a){throw new Error("Error occured while processing stream payload - ".concat(se(a)))}})}}}function Ci(e){return async(...t)=>{var n;if(!An.test(t[0]))throw new Error(G("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{status:o,statusText:i}=r;if(!r.ok)throw new Error(i,{cause:r});const a=r.headers.get("content-type")||"";if(Object.values(kt).every(f=>!a.includes(f)))throw new Error("".concat(En," ").concat(a),{cause:r});if(a.includes(kt.json))return{[Symbol.asyncIterator](){return ne(this,null,function*(){const f=yield new $(Nn(r));yield L(_({},f),{hasNext:!1})})}};const s=(a!=null?a:"").match(hi),l="--".concat(s?s[1]:"-");if(!((n=r.body)!=null&&n.getReader)&&!r.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:r});const c=wi(r);let u={},m;return{[Symbol.asyncIterator](){return ne(this,null,function*(){var f,p;try{let b=!0;try{for(var v=X(_i(c,l)),d,h,y;d=!(h=yield new $(v.next())).done;d=!1){const S=h.value.map(k=>{try{return JSON.parse(k)}catch(N){throw new Error("Error in parsing multipart response - ".concat(se(N)))}}).map(k=>{const{data:N,incremental:F,hasNext:Z,extensions:de,errors:Fe}=k;if(!F)return L(_(_({data:N||{}},D("errors",Fe)),D("extensions",de)),{hasNext:Z});const J=F.map(({data:Q,path:Zt,errors:ue})=>_({data:Q&&Zt?Tn(Zt,Q):{}},D("errors",ue)));return L(_({data:J.length===1?J[0].data:kr([...J.map(({data:Q})=>Q)])},D("errors",Mr(J))),{hasNext:Z})});m=(p=(f=S.find(k=>k.extensions))==null?void 0:f.extensions)!=null?p:m;const I=Mr(S);if(u=kr([u,...S.map(({data:k})=>k)]),b=S.slice(-1)[0].hasNext,I.length>0)throw new Error(Cn,{cause:{graphQLErrors:I}});if(Object.keys(u).length===0)throw new Error(Sn);yield L(_(_({},D("data",u)),D("extensions",m)),{hasNext:b})}}catch(g){y=[g]}finally{try{d&&(h=v.return)&&(yield new $(h.call(v)))}finally{if(y)throw y[0]}}if(b)throw new Error("Response stream terminated unexpectedly")}catch(b){const g=Rr(b);yield L(_(_({},D("data",u)),D("extensions",m)),{errors:L(_({message:G(se(b)),networkStatusCode:o},D("graphQLErrors",g==null?void 0:g.graphQLErrors)),{response:r}),hasNext:!1})}})}}}catch(r){return{[Symbol.asyncIterator](){return ne(this,null,function*(){const o=Rr(r);yield{errors:_(_({message:G(se(r))},D("networkStatusCode",o==null?void 0:o.status)),D("response",o)),hasNext:!1}})}}}}}const Ei="mutation cartCreate($input:CartInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartCreate(input:$input){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}",Si="mutation cartBuyerIdentityUpdate($cartId:ID!$buyerIdentity:CartBuyerIdentityInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartBuyerIdentityUpdate(cartId:$cartId buyerIdentity:$buyerIdentity){...@defer{cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",Pi="mutation cartSelectedDeliveryOptionsUpdate($cartId:ID!$selectedDeliveryOptions:[CartSelectedDeliveryOptionInput!]!$country:CountryCode=CA$language:LanguageCode=EN)@inContext(country:$country language:$language){cartSelectedDeliveryOptionsUpdate(cartId:$cartId selectedDeliveryOptions:$selectedDeliveryOptions){...@defer{cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}}",Ai="mutation applePaySessionCreate{applePaySessionCreate{...@defer{applePaySession{body}}}}",Ii="query cartQuery($id:ID!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cart(id:$id){...CartParts}}",Ti="query subscriptionPolicyQuery($country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){shop{subscriptionPolicy{body}}}",Oi="mutation cartPaymentUpdate($cartId:ID!$input:CartPaymentInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartPaymentUpdate(cartId:$cartId payment:$input){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}}}",Ne="fragment CartParts on Cart{id checkoutUrl buyerIdentity{deliveryAddressPreferences{...on MailingAddress{address1 address2 city province phone country firstName lastName zip}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{code title description handle estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}merchandise{...on ProductVariant{requiresShipping}}}}}}",Ni="mutation cartSubmitForCompletion($cartId:ID!$attemptToken:String!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartSubmitForCompletion(cartId:$cartId attemptToken:$attemptToken){result{__typename ...on SubmitSuccess{redirectUrl}...on SubmitThrottled{pollAfterV2:pollAfter}...on SubmitFailed{errors{code message}}}errors:userErrors{...on CartUserError{code field message}}}}",Di="unstable";class gt{constructor({accessToken:t,country:n,locale:r,apiVersion:o=Di}){if(w(this,"client"),w(this,"country"),w(this,"locale"),!t)throw new Error("StorefrontApiClient constructed with no access token");if(!n)throw new Error("StorefrontApiClient constructed with no buyer country");if(!r)throw new Error("StorefrontApiClient constructed with no locale");this.country=n,this.locale=r;const i="/api/".concat(o,"/graphql.json");this.client=mi({headers:{"Content-Type":"application/json",Accept:"application/json","X-Shopify-Storefront-Access-Token":t,"X-SDK-Variant":"portable-wallets"},url:i,retries:0,logger:a=>{if(a.type==="HTTP-Response"){const[s,l]=a.content.requestParams;E.leaveBreadcrumb("POST: ".concat(s),{statusCode:a.content.response.status,statusText:a.content.response.statusText,url:s,method:l==null?void 0:l.method,headers:l==null?void 0:l.headers,body:l==null?void 0:l.body},"request")}}})}async createCart(t){var n,r;const{errors:o,data:i}=await this.request([Ei,Ne],{input:{lines:[{merchandiseId:t.merchandiseId,quantity:t.quantity,sellingPlanId:t.sellingPlanId,attributes:Object.entries((n=t.lineItemProperties)!=null?n:{}).map(([a,s])=>({key:a,value:s}))}],discountCodes:t.discountCodes},country:this.country,language:this.formatLanguage(this.locale)});if(o&&this.onError(o),(r=i==null?void 0:i.cartCreate)!=null&&r.cart)return this.parseCartResponse(i.cartCreate.cart);throw new Error("createCart query returned nothing")}async updateCartBuyerIdentity(t){var n,r;const{cartId:o,emailAddress:i,streetAddress:a}=t,s=this.formatLanguage(this.locale),l=await this.requestStream([Si,Ne],{cartId:o,country:this.country,language:s,buyerIdentity:{email:i,countryCode:a==null?void 0:a.countryCode,phone:a==null?void 0:a.phone,deliveryAddressPreferences:a?[{deliveryAddress:{address1:a.address1,address2:a.address2,city:a.city,zip:a.postalCode,province:a.zoneCode,phone:a.phone,country:a.countryCode,firstName:a.firstName,lastName:a.lastName}}]:void 0}});try{for(var c=X(l),u,m,f;u=!(m=await c.next()).done;u=!1){const p=m.value;p.errors&&this.onError(p.errors);const v=(r=(n=p.data)==null?void 0:n.cartBuyerIdentityUpdate)==null?void 0:r.cart;if(v)return{data:this.parseCartResponse(v),errors:this.parseMutationErrors(p,"cartBuyerIdentityUpdate")}}}catch(p){f=[p]}finally{try{u&&(m=c.return)&&await m.call(c)}finally{if(f)throw f[0]}}throw new Error("No response")}async updateSelectedDeliveryOptions(t,n){var r,o;const i=this.formatLanguage(this.locale),a=await this.requestStream([Pi,Ne],{cartId:t,selectedDeliveryOptions:[{deliveryGroupId:n.deliveryGroupId,deliveryOptionHandle:n.deliveryOptionHandle}],country:this.country,language:i});try{for(var s=X(a),l,c,u;l=!(c=await s.next()).done;l=!1){const m=c.value;m.errors&&this.onError(m.errors);const f=(o=(r=m.data)==null?void 0:r.cartSelectedDeliveryOptionsUpdate)==null?void 0:o.cart;if(f)return{data:this.parseCartResponse(f),errors:this.parseMutationErrors(m,"cartSelectedDeliveryOptionsUpdate")}}}catch(m){u=[m]}finally{try{l&&(c=s.return)&&await c.call(s)}finally{if(u)throw u[0]}}throw new Error("No response")}async applePaySessionCreate(){var t,n,r;const o=await this.requestStream([Ai],{});try{for(var i=X(o),a,s,l;a=!(s=await i.next()).done;a=!1){const c=s.value;c.errors&&this.onError(c.errors);const u=(r=(n=(t=c.data)==null?void 0:t.applePaySessionCreate)==null?void 0:n.applePaySession)==null?void 0:r.body;if(u)return u}}catch(c){l=[c]}finally{try{a&&(s=i.return)&&await s.call(i)}finally{if(l)throw l[0]}}throw new Error("No response")}async fetchCart(t){const n=this.formatLanguage(this.locale),{data:r}=await this.request([Ii,Ne],{id:t,country:this.country,language:n});if(r!=null&&r.cart)return this.parseCartResponse(r.cart);throw new Error("cartQuery returned nothing")}async updateCartPayment(t,n){var r,o,i,a;const s=this.formatLanguage(this.locale),l=await this.request([Oi,Ne],{cartId:t,input:n,country:this.country,language:s});return{data:(o=(r=l.data)==null?void 0:r.cartPaymentUpdate)!=null&&o.cart?this.parseCartResponse((a=(i=l.data)==null?void 0:i.cartPaymentUpdate)==null?void 0:a.cart):null,errors:this.parseMutationErrors(l,"cartPaymentUpdate")}}async submitForCompletion(t,n){var r,o;const i=this.formatLanguage(this.locale),a=await this.request([Ni],{cartId:t,attemptToken:n,country:this.country,language:i});return{data:(o=(r=a.data)==null?void 0:r.cartSubmitForCompletion)==null?void 0:o.result,errors:this.parseCompletionErrors(a)}}async fetchSubscriptionPolicy(){var t,n;const{data:r}=await this.request([Ti],{country:this.country,language:this.formatLanguage(this.locale)});return(n=(t=r==null?void 0:r.shop)==null?void 0:t.subscriptionPolicy)==null?void 0:n.body}async request(t,n){return this.client.request(t.join(""),{variables:n})}async requestStream(t,n){return this.client.requestStream(t.join(""),{variables:n})}onError(t){if(!t)return;E.leaveBreadcrumb("GraphQL errors",t,"error");const n=t!=null&&t.networkStatusCode?"HTTP status ".concat(t.networkStatusCode):t.message;throw new Error("GraphQL query failed: ".concat(n))}formatLanguage(t){return t.includes("-")?t.split("-")[0].toUpperCase():t.toUpperCase()}parseCartResponse(t){var n,r,o;const i=t.lines.edges.map(l=>{const c=l.node;return{quantity:c.quantity,totalAmount:{amount:c.cost.totalAmount.amount,currencyCode:c.cost.totalAmount.currencyCode},merchandise:{requiresShipping:c.merchandise.requiresShipping}}}),a=[],s=[];return t.deliveryGroups.edges.forEach(l=>{const c=l.node.selectedDeliveryOption;c&&s.push(this.buildDeliveryOption(c,l.node.id)),l.node.deliveryOptions.forEach(u=>{a.push(this.buildDeliveryOption(u,l.node.id))})}),{id:t.id,totalAmount:t.cost.totalAmount,subtotalAmount:(n=t.cost.subtotalAmount)!=null?n:void 0,totalTaxAmount:(r=t.cost.totalTaxAmount)!=null?r:void 0,totalDutyAmount:(o=t.cost.totalDutyAmount)!=null?o:void 0,discountAllocations:t.discountAllocations,lineItems:i,deliveryOptions:a,selectedDeliveryOptions:s,checkoutUrl:t.checkoutUrl}}parseGraphQlErrors(t){var n,r;return(r=(n=t==null?void 0:t.graphQLErrors)==null?void 0:n.map(o=>o.message.replace(/\(Expected.*\)/,"").trim()))!=null?r:[]}parseMutationErrors(t,n){var r,o,i;const a=this.parseGraphQlErrors(t.errors),s=((i=(o=(r=t.data)==null?void 0:r[n])==null?void 0:o.errors)==null?void 0:i.map(c=>c.field&&c.field.length>0?"".concat(c.code,": ").concat(c.field.join(".")):c.code).filter(c=>c))||[],l=[...a,...s];return E.leaveBreadcrumb("GraphQL errors on mutation",l,"error"),l}parseCompletionErrors(t){var n,r,o,i;const a=this.parseGraphQlErrors(t.errors);let s=[];((o=(r=(n=t.data)==null?void 0:n.cartSubmitForCompletion)==null?void 0:r.result)==null?void 0:o.__typename)==="SubmitFailed"&&(s=(i=t.data.cartSubmitForCompletion.result.errors.map(c=>c.code))!=null?i:[]);const l=[...a,...s];return E.leaveBreadcrumb("GraphQL errors on completion",l,"error"),l}buildDeliveryOption(t,n){return{deliveryGroupId:n,title:t.title,estimatedCost:{amount:t.estimatedCost.amount,currencyCode:t.estimatedCost.currencyCode},handle:t.handle,description:t.description}}}async function It({cartId:e,emailAddress:t,streetAddress:n,cartClient:r,instrumentName:o}){try{if(!e)throw new Error("[".concat(o,"] provided no cart ID when updating buyer identity"));if(!r)throw new Error("[".concat(o,"] provided invalid cart client when updating buyer identity"));return await r.updateCartBuyerIdentity({cartId:e,emailAddress:t,streetAddress:n})}catch(i){throw A.updateFailed(o,"updateBuyerIdentity"),i}}async function Ri({cartId:e,cartClient:t,instrumentName:n,selectedDeliveryOptions:r}){try{if(!e)throw new Error("[".concat(n,"] provided no cart ID when updating shipping method"));if(!t)throw new Error("[".concat(n,"] provided invalid cart client when updating shipping method"));return await t.updateSelectedDeliveryOptions(e,r)}catch(o){throw A.updateFailed(n,"updateSelectedDeliveryOptions"),o}}async function Mi({cartId:e,totalAmount:t,paymentMethod:n,billingAddress:r,cartClient:o,instrumentName:i}){try{if(!e)throw new Error("[".concat(i,"] provided no cart ID when updating payment"));if(!t)throw new Error("[".concat(i,"] provided no total amount when updating payment"));if(!n)throw new Error("[".concat(i,"] provided no apple pay wallet content when updating payment"));if(!o)throw new Error("[".concat(i,"] provided invalid cart client when updating payment"));const a={freePaymentMethod:{billingAddress:r}};return await o.updateCartPayment(e,_({amount:{amount:t.amount,currencyCode:t.currencyCode}},t.amount<=0?a:n))}catch(a){throw A.updateFailed(i,"updatePayment"),a}}async function ki({cartId:e,token:t,cartClient:n,instrumentName:r}){try{if(!e)throw new Error("[".concat(r,"] provided no cart ID when submitting for completion"));if(!n)throw new Error("[".concat(r,"] provided invalid cart client when submitting for completion"));if(!t)throw new Error("[".concat(r,"] provided no token when submitting for completion"));return await n.submitForCompletion(e,t)}catch(o){throw A.updateFailed(r,"submitForCompletion"),o}}class xi{constructor({accessToken:t,buyerCountry:n,buyerCurrency:r,button:o,i18n:i,merchantName:a,dataSource:s,apiClient:l,walletParams:c}){w(this,"name",P.ApplePay),w(this,"accessToken"),w(this,"button"),w(this,"buyerCountry"),w(this,"cart"),w(this,"apiClient"),w(this,"dataSource"),w(this,"i18n"),w(this,"merchantName"),w(this,"session"),w(this,"paymentSheetActionGenerator"),w(this,"shippingRequired"),w(this,"begin",()=>{this.session.begin()}),w(this,"onvalidatemerchant",async()=>{try{const u=this.getMerchantSession(),m=await Wt({element:this.button,instrumentName:P.ApplePay,dataSource:this.dataSource});this.cart=m,this.session.completeMerchantValidation(await u)}catch(u){this.terminateSession(u)}}),w(this,"onshippingcontactselected",async u=>{var m;try{const f=Ge(u.shippingContact),p=await It({cartId:this.cart.id,streetAddress:f,cartClient:this.apiClient,instrumentName:this.name}),v=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(p,this.shippingRequired);(m=v.effects)==null||m.forEach(d=>d()),Oe({paymentSheetAction:v,onProceed:d=>this.completeShippingContactSelection(p.data,d),terminateSession:this.terminateSession})}catch(f){this.terminateSession(f)}}),w(this,"onshippingmethodselected",async u=>{var m,f;try{const p=await Ri({cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name,selectedDeliveryOptions:{deliveryGroupId:(m=this.cart.selectedDeliveryOptions[0])==null?void 0:m.deliveryGroupId,deliveryOptionHandle:u.shippingMethod.identifier}}),v=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(p);(f=v.effects)==null||f.forEach(d=>d()),Oe({paymentSheetAction:v,onProceed:()=>this.completeShippingMethodSelection(p.data),terminateSession:this.terminateSession})}catch(p){this.terminateSession(p)}}),w(this,"onpaymentmethodselected",async u=>{var m;try{const{billingContact:f}=u.paymentMethod;if(!this.shippingRequired&&f){const p=Ge(f),v=await It({cartId:this.cart.id,streetAddress:p,cartClient:this.apiClient,instrumentName:this.name}),d=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(v);(m=d.effects)==null||m.forEach(h=>h()),await Oe({paymentSheetAction:d,onProceed:()=>this.cart=v.data,terminateSession:this.terminateSession})}this.session.completePaymentMethodSelection({newTotal:Pt(this.merchantName,this.cart.totalAmount),newLineItems:At({subtotal:this.cart.subtotalAmount,selectedDeliveryOptions:this.cart.selectedDeliveryOptions,duties:this.cart.totalDutyAmount,taxes:this.cart.totalTaxAmount,discountAllocations:this.cart.discountAllocations,i18n:this.i18n})})}catch(f){this.terminateSession(f)}}),w(this,"oncancel",()=>{A.sheetCancelled(P.ApplePay),this.button.disabled=!1}),w(this,"onpaymentauthorized",async u=>{const m=async S=>{var I,k;switch((I=S.effects)==null||I.forEach(N=>N()),S.action){case"complete":{const N=ApplePaySession.STATUS_SUCCESS;try{await this.session.completePayment(N),A.sheetSuccess(P.ApplePay),window.location.assign(S.redirectUrl)}catch(F){this.terminateSession(F)}break}case"show_error":{const N=(k=S.errors)!=null?k:[],F={status:ApplePaySession.STATUS_FAILURE,errors:N};try{await this.session.completePayment(F)}catch(Z){this.terminateSession(Z)}break}case"abort":{try{await this.session.completePayment(ApplePaySession.STATUS_FAILURE),this.button.disabled=!1}catch(N){this.terminateSession(N)}break}default:this.terminateSession(new Error("[".concat(P.ApplePay,"] completion action not handled: ").concat(S.action)))}},{token:f,billingContact:p,shippingContact:v}=u.payment;let d=null,h=null;try{if(!p){await this.session.completePayment(ApplePaySession.STATUS_FAILURE);return}if(d=ai(L(_({},p),{phoneNumber:v==null?void 0:v.phoneNumber})),this.shippingRequired){if(!v){await this.session.completePayment(ApplePaySession.STATUS_FAILURE);return}h=Ge(v)}}catch(S){this.terminateSession(S);return}const y=async()=>{try{const S=await It({cartId:this.cart.id,emailAddress:v.emailAddress,streetAddress:this.shippingRequired?h:void 0,cartClient:this.apiClient,instrumentName:this.name}),I=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(S);await Oe({paymentSheetAction:I,onProceed:async k=>{k&&k.length>0?await this.session.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:k}):await b()},terminateSession:this.terminateSession})}catch(S){this.terminateSession(S)}},b=async()=>{try{const S=await Mi({cartId:this.cart.id,totalAmount:this.cart.totalAmount,paymentMethod:{walletPaymentMethod:{applePayWalletContent:{billingAddress:d,data:f.paymentData.data,header:f.paymentData.header,lastDigits:f.paymentMethod.displayName.split(" ")[1],signature:f.paymentData.signature,version:f.paymentData.version}}},billingAddress:d,cartClient:this.apiClient,instrumentName:this.name}),I=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(S);await Oe({paymentSheetAction:I,onProceed:async k=>{k&&k.length>0?await this.session.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:k}):await g()},terminateSession:this.terminateSession})}catch(S){this.terminateSession(S)}},g=async()=>{try{const S=await ki({cartId:this.cart.id,token:f.transactionIdentifier,cartClient:this.apiClient,instrumentName:this.name}),I=this.paymentSheetActionGenerator.mapCompletionResultToPaymentSheetAction(S);await m(I)}catch(S){this.terminateSession(S)}};await y()}),w(this,"terminateSession",u=>{this.button.disabled=!1,u&&E.notify(u),this.session.abort();const m=this.i18n.translate("brand.apple_pay");jt(this.i18n.translate("error_dialogs.wallet.title",{wallet:m}),this.i18n.translate("error_dialogs.wallet.generic_error",{wallet:m}))}),w(this,"getMostRecentNonNullCart",(u,m)=>u?(this.cart=u,u):m),w(this,"handleNullCart",u=>{if(!u)throw new Error("[".concat(P.ApplePay,"] no cart returned on mutation, aborting"))}),w(this,"completeShippingContactSelection",(u,m)=>{try{const f=this.getMostRecentNonNullCart(u,this.cart);this.session.completeShippingContactSelection({errors:m!=null?m:[],newTotal:Pt(this.merchantName,f.totalAmount),newLineItems:At({subtotal:f.subtotalAmount,selectedDeliveryOptions:f.selectedDeliveryOptions,duties:f.totalDutyAmount,taxes:f.totalTaxAmount,discountAllocations:f.discountAllocations,i18n:this.i18n}),newShippingMethods:si(f.deliveryOptions)})}catch(f){this.terminateSession(f)}}),w(this,"completeShippingMethodSelection",u=>{try{this.handleNullCart(u),this.cart=u,this.session.completeShippingMethodSelection({newTotal:Pt(this.merchantName,u.totalAmount),newLineItems:At({subtotal:u.subtotalAmount,selectedDeliveryOptions:u.selectedDeliveryOptions,duties:u.totalDutyAmount,taxes:u.totalTaxAmount,discountAllocations:u.discountAllocations,i18n:this.i18n})})}catch(m){this.terminateSession(m)}}),this.shippingRequired=s.shippingRequired(),this.session=new ApplePaySession(Ur,di({shippingRequired:this.shippingRequired,walletParams:c,buyerCurrency:r})),this.accessToken=t,this.buyerCountry=n,this.button=o,this.cart=null,this.apiClient=l,this.dataSource=s,this.i18n=i,this.merchantName=a,this.session.onvalidatemerchant=this.onvalidatemerchant,this.session.onshippingcontactselected=this.onshippingcontactselected,this.session.onshippingmethodselected=this.onshippingmethodselected,this.session.onpaymentmethodselected=this.onpaymentmethodselected,this.session.oncancel=this.oncancel,this.session.onpaymentauthorized=this.onpaymentauthorized,this.paymentSheetActionGenerator=new ui(i)}async getMerchantSession(){const t=await new gt({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,apiVersion:"unstable"}).applePaySessionCreate();return JSON.parse(t)}}const Li="button[name=add]",$i="button[name=checkout][type=submit]";function Dn(){let e=document.querySelector(Li);return e||(e=document.querySelector($i)),e}function Ui(){const e=Dn();if(!e)return null;const t=e.offsetHeight;return t<1?null:t}function Bi(){const e=Dn();if(!e)return null;const t=e.offsetWidth;return t<1?null:t}class qi extends xe{constructor(){super(...arguments),w(this,"fragment",null),w(this,"button",null)}static get observedAttributes(){return["disabled"]}get merchantName(){return this.walletParams.merchantName}async connectedCallback(){this.render()}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async handleClick(t){if(t.preventDefault(),this.disabled||!this.button||this.button.hasAttribute("aria-disabled"))return;this.disabled=!0;const[n,r,o]=await Promise.all([this.i18n,this.dataSource,this.apiClient]);let i;try{if(i=new xi({accessToken:this.accessToken,buyerCountry:this.buyerCountry,buyerCurrency:this.buyerCurrency,button:this,i18n:n,merchantName:this.merchantName,dataSource:r,apiClient:o,walletParams:this.walletParams}),!i)throw new Error("missing ApplePaySession");i.begin(),A.sheetClicked({instrument:P.ApplePay,result:"success"})}catch(a){E.notify(a),A.sheetClicked({instrument:P.ApplePay,result:"failed"}),i==null||i.terminateSession()}}async render(){var t,n;if(!this.button){const r=await this.i18n;this.button=document.createElement("button"),this.button.role="button",this.button.setAttribute("aria-label",r.translate("brand.apple_pay")),this.button.type="button",this.button.onclick=i=>this.handleClick(i),this.button.className="apple-pay-button ".concat(qt.BRANDED_BUTTON),this.button.classList.add(this.backgroundIsDark()?"".concat(rr.LIGHT):"".concat(rr.DARK));const o=(t=Ui())!=null?t:so;this.button.setAttribute("style","height: ".concat(o,"px"))}if(this.disabled&&this.button.setAttribute("aria-disabled","true"),!this.fragment){this.fragment=document.createDocumentFragment();const r=document.createElement("style");r.innerHTML=oi,this.fragment.append(r,this.button),this.appendChild(this.fragment),(n=this.onRendered)==null||n.call(this)}}}function Rn(e){return function(t,n,r){const o=r.value;return r.value=function(...i){const a=o.apply(this,i);return a.eligible||console.debug("[DEBUG] ".concat(e," could not be rendered. Reason: ").concat(a.reason)),a},r}}var Fi=Object.defineProperty,ji=Object.getOwnPropertyDescriptor,Mn=(e,t,n,r)=>{for(var o=r>1?void 0:r?ji(t,n):t,i=e.length-1,a;i>=0;i--)(a=e[i])&&(o=(r?a(t,n,o):a(o))||o);return r&&o&&Fi(t,n,o),o};class Kt extends yt{constructor(t,n){super(t,n),w(this,"companyFieldRequired"),w(this,"supportsSubscriptions"),this.companyFieldRequired=!!this.walletParams.companyRequired,this.supportsSubscriptions=!!this.walletParams.supportsSubscriptions}static walletName(){return"apple_pay"}getWebComponentName(){return"shopify-apple-pay-button"}getWebComponentClass(){return qi}getInstrumentName(){return P.ApplePay}applePayInIframe(){return typeof window>"u"||window.self!==window.top}getLoadEligibility(){var t;return this.applePayInIframe()?{eligible:!1,reason:"cannot be loaded in an iframe"}:(t=this.options)!=null&&t.hasSellingPlan&&!this.supportsSubscriptions?{eligible:!1,reason:"does not support subscriptions"}:{eligible:!0}}getPartnerSDKEligibility(){var t,n,r,o;return typeof window>"u"||window.ApplePaySession===void 0?{eligible:!1,reason:"window or ApplePaySession is undefined"}:(n=(t=window.ApplePaySession).supportsVersion)!=null&&n.call(t,Ur)?(o=(r=window.ApplePaySession).canMakePayments)!=null&&o.call(r)?{eligible:!0}:{eligible:!1,reason:"failed SDK eligibility check"}:{eligible:!1,reason:"SDK does not meet minimum version requirement"}}}Mn([Rn("Apple Pay")],Kt.prototype,"getLoadEligibility",1),Mn([Rn("Apple Pay")],Kt.prototype,"getPartnerSDKEligibility",1);const Vi='<svg xmlns="http://www.w3.org/2000/svg" height=\'27px\' preserveAspectRatio="xMidYMid" viewBox="0 0 188 50" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M123.095 23.736c1.014 0 1.761-.338 2.242-1.015.479-.677.72-1.745.72-3.206 0-1.478-.236-2.555-.707-3.232s-1.223-1.015-2.255-1.015c-.942 0-1.83.24-2.663.72v7.027c.796.48 1.684.721 2.663.721Zm-5.951 8.148c-.236 0-.408-.05-.517-.147-.108-.098-.162-.272-.162-.52v-17.82c0-.249.054-.422.162-.52.109-.098.281-.147.517-.147h1.956c.417 0 .671.195.761.587l.19.695a6.03 6.03 0 0 1 1.97-1.23 6.387 6.387 0 0 1 2.351-.453c1.757 0 3.148.632 4.171 1.897 1.024 1.264 1.536 2.974 1.536 5.129 0 1.478-.254 2.77-.761 3.874-.508 1.104-1.196 1.954-2.066 2.55-.869.598-1.866.896-2.989.896a6.462 6.462 0 0 1-2.12-.347c-.67-.232-1.24-.552-1.711-.962v5.85c0 .25-.051.423-.149.52-.1.099-.277.148-.531.148h-2.608Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M133.418 26.381c-.235 0-.408-.053-.517-.16-.108-.108-.162-.276-.162-.508V13.397c0-.249.054-.422.162-.52.109-.098.282-.147.517-.147h1.957c.416 0 .67.196.76.587l.354 1.443c.724-.784 1.408-1.34 2.051-1.67a4.438 4.438 0 0 1 2.052-.494h.38c.254 0 .435.049.544.147.108.098.162.272.162.52v2.245c0 .231-.049.4-.149.507-.1.107-.276.161-.529.161-.127 0-.29-.01-.49-.027a9.036 9.036 0 0 0-.761-.027c-.416 0-.923.059-1.521.174a7.603 7.603 0 0 0-1.522.44v8.977c0 .232-.05.4-.149.508-.1.107-.277.16-.531.16h-2.608Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M144.276 26.381c-.235 0-.407-.053-.516-.16-.109-.108-.163-.276-.163-.508V13.397c0-.249.054-.422.163-.52.109-.098.281-.147.516-.147h2.609c.253 0 .43.049.529.147.1.098.15.271.15.52v12.316c0 .232-.05.4-.15.508-.099.107-.276.16-.529.16h-2.609Zm1.305-15.762c-.69 0-1.241-.187-1.658-.56-.417-.375-.625-.882-.625-1.524 0-.641.208-1.149.625-1.523.417-.374.968-.56 1.658-.56.688 0 1.24.186 1.657.56.417.374.625.882.625 1.523 0 .642-.208 1.15-.625 1.523-.417.374-.969.561-1.657.561Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M151.607 26.381c-.235 0-.408-.053-.516-.16-.109-.108-.163-.276-.163-.508V13.397c0-.249.054-.422.163-.52.108-.098.281-.147.516-.147h1.957c.416 0 .67.195.76.587l.218.721c.96-.623 1.825-1.063 2.595-1.322a7.427 7.427 0 0 1 2.378-.387c1.63 0 2.78.57 3.451 1.71.923-.606 1.794-1.042 2.608-1.31a8.063 8.063 0 0 1 2.528-.4c1.267 0 2.25.347 2.948 1.041.697.695 1.047 1.666 1.047 2.913v9.43c0 .232-.052.4-.15.508-.1.107-.278.16-.531.16h-2.608c-.235 0-.408-.053-.516-.16-.108-.108-.163-.276-.163-.508v-8.576c0-1.21-.553-1.816-1.658-1.816-.977 0-1.966.231-2.963.694v9.698c0 .232-.048.4-.148.508-.1.107-.276.16-.531.16h-2.608c-.236 0-.407-.053-.516-.16-.109-.108-.163-.276-.163-.508v-8.576c0-1.21-.553-1.816-1.657-1.816-1.015 0-2.011.24-2.99.721v9.671c0 .232-.05.4-.149.508-.1.107-.277.16-.53.16h-2.609Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M180.629 18.393c.923 0 1.594-.138 2.01-.414.417-.276.626-.699.626-1.269 0-1.122-.68-1.683-2.039-1.683-1.739 0-2.744 1.051-3.016 3.153.724.142 1.53.213 2.419.213Zm.897 8.388c-2.247 0-3.973-.604-5.178-1.816-1.204-1.21-1.806-2.947-1.806-5.21 0-2.314.614-4.131 1.847-5.45 1.232-1.317 2.945-1.976 5.137-1.976 1.684 0 3.001.4 3.953 1.202.95.801 1.427 1.87 1.427 3.205 0 1.336-.512 2.348-1.535 3.033-1.024.686-2.532 1.028-4.524 1.028-1.034 0-1.931-.097-2.692-.293.11 1.193.476 2.048 1.101 2.564.625.517 1.571.775 2.839.775.508 0 1.002-.031 1.482-.093.479-.063 1.146-.2 1.997-.415a1.141 1.141 0 0 1 .299-.053c.308 0 .461.205.461.614v1.23c0 .284-.04.485-.121.6-.082.116-.24.219-.476.308a11.838 11.838 0 0 1-4.211.747Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M180.103 41.388C172.355 47.011 161.121 50 151.447 50c-13.557 0-25.766-4.927-35.004-13.128-.726-.645-.079-1.524.793-1.025 9.968 5.702 22.294 9.137 35.025 9.137 8.589 0 18.029-1.753 26.716-5.376 1.31-.546 2.408.85 1.126 1.78Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M183.329 37.77c-.992-1.248-6.552-.592-9.05-.298-.756.09-.874-.56-.192-1.031 4.436-3.063 11.703-2.179 12.548-1.153.852 1.034-.224 8.198-4.38 11.617-.639.525-1.247.245-.963-.45.934-2.296 3.029-7.438 2.037-8.686Z" fill="#fff"/><path d="M5.265 25.806V7.924h6.426c1.72 0 3.105.438 4.155 1.316 1.066.877 1.6 2.021 1.6 3.432 0 .877-.207 1.634-.62 2.27-.395.62-.989 1.102-1.78 1.446 1.1.327 1.935.869 2.503 1.626.585.74.878 1.651.878 2.735 0 1.549-.577 2.779-1.73 3.69-1.152.913-2.7 1.369-4.645 1.369H5.265Zm3.665-7.793v5.032h3.045c1.755 0 2.632-.826 2.632-2.477 0-1.704-.938-2.555-2.813-2.555H8.93Zm0-7.33v4.698h2.245c1.669 0 2.503-.774 2.503-2.323 0-1.583-.766-2.374-2.297-2.374H8.93Zm21.157 15.123-.361-1.393c-1.532 1.187-3.132 1.78-4.8 1.78-1.17 0-2.082-.344-2.736-1.032-.654-.705-.98-1.669-.98-2.89v-9.652h3.767v8.594c0 1.393.602 2.09 1.807 2.09.894 0 1.771-.275 2.632-.826V12.62h3.768v13.188h-3.097Zm10.209.207-5.213-13.394h4l2.942 9.858 2.787-9.858h3.897l-5.574 14.968c-.5 1.36-1.11 2.34-1.833 2.942-.722.602-1.634.903-2.735.903-.86 0-1.695-.137-2.503-.413v-2.554c.55.051 1.04.077 1.47.077.723 0 1.282-.172 1.678-.516.396-.327.731-.903 1.007-1.73l.077-.283Zm27.841-.207-2.27-9.264-2.298 9.264h-3.638L55.724 12.62H59.7l2.193 9.523 2.374-9.523h3.38l2.427 9.549 2.064-9.549h3.871l-4.232 13.188h-3.639Zm9.932 0V12.62h3.768v13.188h-3.768Zm1.884-15.225c-.654 0-1.179-.181-1.574-.542-.396-.362-.594-.852-.594-1.471 0-.62.198-1.11.594-1.471.395-.362.92-.542 1.574-.542s1.178.18 1.574.542c.396.361.594.851.594 1.47 0 .62-.198 1.11-.594 1.472-.396.361-.92.542-1.574.542Zm13.444 14.89c-.93.361-1.97.542-3.123.542-1.462 0-2.546-.344-3.252-1.032-.688-.689-1.032-1.755-1.032-3.2v-6.374h-1.987v-2.323l2.09-.413.568-3.613h3.097v3.561h3.561v2.787h-3.561V21.6c0 .55.138.938.413 1.161.275.224.74.336 1.393.336a12.5 12.5 0 0 0 1.833-.155v2.529Zm10.775.335v-8.645c0-.705-.155-1.221-.464-1.548-.31-.327-.783-.49-1.42-.49-.946 0-1.883.292-2.813.877v9.806h-3.767V6.71h3.767v7.096c1.48-1.049 3.028-1.574 4.646-1.574 1.221 0 2.159.336 2.812 1.007.672.653 1.007 1.591 1.007 2.813v9.755h-3.768Z" fill="#fff"/></svg>\n',Hi=".buy-with-prime-button:hover:enabled{background-color:#0684eb!important}.buy-with-prime-button:focus{box-shadow:0 0 0 2px #1a98ff,inset 0 0 0 2px rgb(var(--color-background))!important;outline:none!important}.buy-with-prime-button:active,.buy-with-prime-button:hover:enabled:active{background-color:#0066cd!important;box-shadow:none!important}\n";class Wi extends xe{constructor(){super(...arguments),w(this,"fragment",null),w(this,"button",null)}async connectedCallback(){this.render()}disconnectedCallback(){}createButton(){const t=document.createElement("button");return t.type="button",t.className="buy-with-prime-button",t.style.width="100%",t.style.height="100%",t.style.paddingTop="15px",t.style.paddingBottom="8px",t.style.paddingRight="10px",t.style.paddingLeft="10px",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.gap="5px",t.style.opacity="1",t.innerHTML="".concat(Vi),t.disabled=!1,t.style.backgroundColor="#1A98FF",t.style.color="#FFFFFF",t.style.cursor="pointer",t}async handleClick(){var t,n;(n=(t=window.amazon)==null?void 0:t.buywithprime)==null||n.initCheckout({amazonPayOptions:this.walletParams})}render(){var t;if(this.button||(this.button=this.createButton(),this.button.onclick=()=>this.handleClick()),!this.fragment){this.fragment=document.createDocumentFragment();const n=document.createElement("style");n.innerHTML=Hi,this.fragment.append(n,this.button),this.appendChild(this.fragment)}(t=this.onRendered)==null||t.call(this)}}const zi={buywithprime:{initCheckout:async e=>{const t=window.location.origin.replace(/^https:\/\/shop\d\.shopify\./,"https://optimus."),n=e.amazonPayOptions.createCheckoutSessionConfig,r=JSON.parse(n.payloadJSON),o=new URL(r.webCheckoutDetails.checkoutReviewReturnUrl);await fetch("".concat(t,"/sandbox/v2/checkoutSessions"),{method:"POST",body:JSON.stringify(e.amazonPayOptions),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}}),o.searchParams.set("amazonCheckoutSessionId","testCheckoutSessionId"),o.searchParams.set("promiseId","testPromiseId"),window.location.href=o.toString()}}},z=class Yt extends yt{static walletName(){return"buy_with_prime"}constructor(t){super(t)}getWebComponentName(){return"shopify-buy-with-prime-button"}getInstrumentName(){return P.BuyWithPrime}isSpinInstance(){return!1}getWebComponentClass(){return Wi}async loadWalletSDKAttempt(){return new Promise((t,n)=>{if(document.querySelector('script[src="'.concat(Yt.SDK_URL,'"]'))&&window.amazon){t();return}const r=document.createElement("script");r.src=Yt.SDK_URL,r.onload=()=>{t()},r.onerror=()=>{n(new Error("Error loading Amazon SDK"))},document.head.append(r)})}async loadWalletSDK(){let t=0;if(this.isSpinInstance()){await this.loadMockSDK();return}do try{await this.loadWalletSDKAttempt();break}catch(n){if(t++,t===Yt.MAX_RETRIES)throw n}while(t<Yt.MAX_RETRIES)}async loadMockSDK(){return window.amazon=zi,"loaded"}};w(z,"SDK_URL","https://static-na.payments-amazon.com/checkout.js"),w(z,"MAX_RETRIES",3);let xt=z;const Ki=[Xa,ni,Kt,xt],Gi=new Map(Ki.map(e=>[e.walletName(),(t,n)=>new e(t,n)]));function kn(e,t){const n=Gi.get(e.name);if(!n)throw new Error("Can't build wallet with name ".concat(e.name));return n(e,t)}function xn(e,t){return e.map(n=>kn(n,t))}var Ue=(e=>(e.ButtonDisplay="buttonDisplay",e.LoadInstrument="loadInstrument",e))(Ue||{});function Ln(){var e,t;return!!((e=window.performance)!=null&&e.mark)&&!!((t=window.performance)!=null&&t.measure)}function bt(e,t){return Yi(e,t),()=>Zi(e,t)}function Yi(e,t){Ln()&&window.performance.mark("".concat(e,"-").concat(t,"-start"))}function Zi(e,t){var n,r;if(Ln())try{const o="".concat(e,"-").concat(t,"-start"),i="".concat(e,"-").concat(t,"-end"),a="".concat(e,"-").concat(t,"-duration");window.performance.mark(i);const s=(r=window.performance.measure(a,o,i))!=null?r:(n=window.performance.getEntriesByName(a,"measure"))==null?void 0:n[0],l=s==null?void 0:s.duration;if(l==null){E.notify(new Error("Could not measure performance of ".concat(e," ").concat(t)),{severity:"warning"});return}return l}catch(o){E.notify(o);return}}const $n="dynamic-checkout .wallet-button-fade-in,cart-wallet-buttons .wallet-button-fade-in{animation:animation-fade-in .3s cubic-bezier(.1,.79,1,1)}dynamic-checkout .shopify-payment-button__button,cart-wallet-buttons .shopify-payment-button__button{cursor:pointer}@keyframes animation-fade-in{0%{opacity:0}to{opacity:1}}button[aria-disabled=true]{opacity:.5;cursor:not-allowed}\n",Qi=".shopify-payment-button__button--hidden{visibility:hidden}.shopify-payment-button__button{border-radius:4px;border:none;box-shadow:0 0 0 0 transparent;color:#fff;cursor:pointer;display:block;font-size:1em;font-weight:500;line-height:1;text-align:center;width:100%;min-height:44px;transition:background .2s ease-in-out}.shopify-payment-button__button[disabled]{opacity:.6;cursor:default}.shopify-payment-button__button--unbranded{background-color:#1990c6;padding:1em 2em}.shopify-payment-button__button--unbranded:hover:not([disabled]){background-color:#136f99}.shopify-payment-button__more-options{background:transparent;border:0 none;cursor:pointer;display:block;font-size:1em;margin-top:1em;text-align:center;width:100%}.shopify-payment-button__more-options:hover:not([disabled]){text-decoration:underline}.shopify-payment-button__more-options[disabled]{opacity:.6;cursor:not-allowed}.shopify-payment-button__button--branded{display:flex;flex-direction:column;min-height:44px;position:relative;z-index:1}.shopify-payment-button__button--branded .shopify-cleanslate{flex:1!important;display:flex!important;flex-direction:column!important}.shopify-payment-button__button.button.loading{position:relative;color:transparent}.shopify-payment-button__button.button.loading>.loading-overlay__spinner{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;height:100%;display:flex;align-items:center}.shopify-payment-button__button.button.loading>.loading-overlay__spinner .spinner{width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}.button.loading>.loading-overlay__spinner .path{stroke:#fff}.shopify-payment-button__button .loading-overlay__spinner{width:1.8rem;display:inline-block}.shopify-payment-button__button .spinner{animation:shopify-rotator 1.4s linear infinite}@keyframes shopify-rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}.shopify-payment-button__button .path{stroke-dasharray:280;stroke-dashoffset:0;transform-origin:center;stroke:#121212;animation:shopify-dash 1.4s ease-in-out infinite}@media screen and (forced-colors: active){.shopify-payment-button__button .path{stroke:CanvasText}}@keyframes shopify-dash{0%{stroke-dashoffset:280}50%{stroke-dashoffset:75;transform:rotate(135deg)}to{stroke-dashoffset:280;transform:rotate(450deg)}}@keyframes walletsLoadingSkeleton{50%{opacity:1}75%{opacity:.5}to{opacity:1}}.shopify-payment-button__skeleton{animation:walletsLoadingSkeleton 4s ease infinite;animation-delay:-.168s;background-color:#dedede;box-sizing:border-box}\n";function Un(e,t,n){if(Re!=null&&Re.length){const r=Re.join(",");e.querySelectorAll(r).forEach(o=>{n===null?o.removeAttribute(t):o.setAttribute(t,n)})}}function Bn(e,t){try{const n=JSON.parse(e!=null?e:"[]");if(!(n instanceof Array))throw new Error("[".concat(t,"] invalid walletConfigs found"));return n}catch(n){throw new Error("[".concat(t,"] Error while parsing walletConfigs JSON: ").concat(n))}}function Ji(e,t){try{return e?JSON.parse(e):null}catch(n){throw new Error("[".concat(t,"] Error while parsing walletConfig JSON: ").concat(n))}}function qn(e){return e.filter(t=>t.getLoadEligibility().eligible)}class Xi{constructor(t,n,r,o){this.getElement=t,this.apiClient=n,this.instrumentName=r,this.variantParams=o}async getCart(){const t=this.getElement(),n=Pr(t);if(!n)return Promise.reject(new Error("[".concat(this.instrumentName,"] unable to find product form")));const r=Bt(lo);return this.apiClient.createCart(L(_({},n),{discountCodes:r?[decodeURIComponent(r)]:[]}))}async getSubscriptionPolicy(){return this.apiClient.fetchSubscriptionPolicy()}shippingRequired(){var t;const n=this.getElement(),r=Pr(n);return!!((t=this.variantParams.find(o=>o.id===Number(r==null?void 0:r.variantId)))!=null&&t.requiresShipping)}}function Fn({instanceNumber:e,styleId:t,styles:n,cssFileName:r}){var o,i;e===1&&(i=(o=window.Shopify)==null?void 0:o.PaymentButton)!=null&&i.isStorefrontPortableWallets&&(es({styleId:t,styles:n,cssFileName:r})||ts({styleId:t,styles:n}))}function es({styleId:e,styles:t,cssFileName:n}){return!!document.querySelector("style#".concat(e))}function ts({styleId:e,styles:t}){const n=document.createElement("style");n.id=e,n.innerHTML=t,document.head.appendChild(n)}const tt=class cs extends zt{constructor(){super(),w(this,"instanceNumber",++cs.instanceCount),w(this,"formObserver"),w(this,"wrapper",document.createElement("div")),w(this,"i18n"),w(this,"dataSource"),w(this,"apiClient"),this.formObserver=new Qa(this,t=>this.disabled=t,t=>this.hasSellingPlan=t),Ft({shop:{shopId:this.shopId}}),Fn({instanceNumber:this.instanceNumber,styleId:"shopify-dynamic-checkout",styles:Qi,cssFileName:"dynamic-checkout-base.css"})}static get observedAttributes(){return["access-token","disabled","has-selling-plan"]}async connectedCallback(){var t,n;try{if((n=(t=this.wrapper)==null?void 0:t.children)!=null&&n.length)return;this.instanceNumber===1&&A.initStarted();const r=bt(Ue.ButtonDisplay,"dc:".concat(this.instanceNumber));this.i18n=ot(),this.apiClient=new gt({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale});const o=()=>this.wrapper,i=await this.loadWallet();this.dataSource=new Xi(o,this.apiClient,i.getInstrumentName(),this.variantParams);const a=i.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,disabled:String(this.disabled),dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient});if(!a)throw new Error("[DynamicCheckout] No web component found");const s=i.getInstrumentName();a.onRendered=()=>{A.instrumentLoaded({instrument:s,measurement:r()})},this.render(a,s),this.formObserver.setupMutationObservers(),A.initCompleted({result:"success"}),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(r){if(this.innerHTML="",r instanceof Error&&r.name==="DeveloperError"){const o=r;console.error(o),A.initCompleted({result:"failed",eventType:"[".concat(o.name,"]: ").concat(o.code)});return}A.initCompleted({result:"failed"}),E.notify(r)}}async attributeChangedCallback(t,n,r){if(n!==r&&(Un(this,t,r),t==="has-selling-plan")){const o=await this.loadWallet(),i=o.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,disabled:String(this.disabled),dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient});if(!i)throw new Error("[DynamicCheckout] No web component found");this.render(i,o.getInstrumentName())}}render(t,n){var r,o;if(!this.wrapper)throw new Error("[DynamicCheckout] tried to render with no wrapper element");this.innerHTML="",this.wrapper=document.createElement("div");const i=document.createElement("style");if(i.innerHTML=$n,this.wrapper.className="wallet-button-fade-in",this.wrapper.appendChild(t),n!==P.BuyItNow){const s=document.createElement("more-payment-options-link");s.setAttribute("buyer-country",(r=this.buyerCountry)!=null?r:""),s.setAttribute("access-token",(o=this.accessToken)!=null?o:""),s.setDataSource(this.dataSource),s.setI18n(this.i18n),s.setAttribute("disabled",String(this.disabled)),this.wrapper.appendChild(s)}const a=new DocumentFragment;a.appendChild(i),a.appendChild(this.wrapper),this.appendChild(a)}async loadWallet(){const t=Bn(this.walletConfigs,"DynamicCheckout");return await ns(t,{hasSellingPlan:this.hasSellingPlan})}};w(tt,"instanceCount",0);let Lt=tt;function rs(e){var t;if(!Vr())return null;const n=(t=wo())==null?void 0:t.toLowerCase();return n?e.find(r=>r.getInstrumentName().toLowerCase().includes(n)):null}async function ns(e,t){var n;const r={name:"buy_it_now",wallet_params:{}};e.push(r);const o=qn(xn(e,t)),i=(n=rs(o))!=null?n:o[0];return await i.loadWalletSDK(),i.getPartnerSDKEligibility().eligible?i:o.find(a=>a.getInstrumentName()===P.BuyItNow)}te("dynamic-checkout",Lt),te("more-payment-options-link",Va,{isChildCustomElement:!0});const os=".wallet-vertical-cart-grid,.wallet-horizontal-cart-grid{margin:0;padding:0;display:flex;gap:1rem}.wallet-vertical-cart-grid{justify-content:flex-start;flex-direction:column}.wallet-horizontal-cart-grid{justify-content:flex-end;flex-direction:row}.wallet-vertical-cart-grid .wallet-cart-button,.wallet-horizontal-cart-grid .wallet-cart-button{min-width:140px;max-width:500px}.wallet-vertical-cart-grid .wallet-cart-button button,.wallet-horizontal-cart-grid .wallet-cart-button button{width:100%}@keyframes walletsLoadingSkeleton{50%{opacity:1}75%{opacity:.5}to{opacity:1}}.shopify-payment-button__skeleton{animation:walletsLoadingSkeleton 4s ease infinite;animation-delay:-.168s;background-color:#dedede;box-sizing:border-box}\n";class Qe{constructor(t,n,r){w(this,"cartObserver"),this.cartToken=t,this.apiClient=n,this.requiresShipping=r,this.cartObserver=new PerformanceObserver(o=>{o.getEntriesByType("resource").some(i=>i.name.includes(De.CartUpdate)||i.name.includes(De.CartChange)||i.name.includes(De.CartAdd)||i.name.includes(De.CartClear))&&this.cartChangedCallback()}),this.cartObserver.observe({entryTypes:["resource"]})}async getCart(){return this.apiClient.fetchCart("gid://shopify/Cart/".concat(this.cartToken))}async getSubscriptionPolicy(){return this.apiClient.fetchSubscriptionPolicy()}shippingRequired(){return this.requiresShipping}disconnectObserver(){this.cartObserver.disconnect()}async cartChangedCallback(){try{const t=await this.getCart();if(!t||!t.id)throw new Error("[".concat(Qe,"] received invalid cart"));if(!t.checkoutUrl)throw new Error("[".concat(Qe,"] Created cart with no checkout URL"));this.requiresShipping=t.lineItems.some(n=>n.merchandise.requiresShipping)}catch(t){E.notify(t)}}}const rt=class ls extends zt{constructor(){super(),w(this,"instanceNumber",++ls.instanceCount),w(this,"dataSource",null),Ft({shop:{shopId:this.shopId,cartId:this.cartId}}),Fn({instanceNumber:this.instanceNumber,styleId:"shopify-dynamic-checkout-cart-grid",styles:os,cssFileName:"cart-wallet-buttons-base.css"})}static get observedAttributes(){return["access-token"]}async connectedCallback(){try{q({event:M.CartInitCalled});const t=bt(Ue.ButtonDisplay,"cart:".concat(this.instanceNumber));if(!this.walletConfigs)throw new Error("[CartWalletButtons] walletConfigs does not exist");const n=Bn(this.walletConfigs,"CartWalletButtons");if(!(n instanceof Array))throw new Error("[CartWalletButtons] invalid walletConfigs found");const r=await as(n,this.instanceNumber),o=ot(),i=new gt({accessToken:this.accessToken,country:this.buyerCountry,locale:o.locale}),a=Bt("cart");if(a===null)throw new Error("[CartWalletButtons] cart cookie does not exist");const s=new Qe(a,i,!!this.hasAttribute("requires-shipping"));this.dataSource=s;const l=r.map(c=>c.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,dataSource:s,i18n:o,apiClient:i}));if(l.length===0){this.innerHTML="";return}this.innerHTML="",this.render(l),q({event:M.InstrumentLoaded,instrumentId:"CartWalletButtons",ttl:t()})}catch(t){this.innerHTML="",E.notify(t)}}disconnectedCallback(){var t;(t=this.dataSource)==null||t.disconnectObserver()}attributeChangedCallback(t,n,r){n!==r&&Un(this,t,r)}get layoutDirection(){const t=this.getAttribute("layout-direction");return t==="horizontal"||t==="vertical"?t:"horizontal"}render(t){const n=Bi(),r=document.createElement("style");r.innerHTML=$n;const o=document.createElement("div");o.className="wallet-button-fade-in wallet-".concat(this.layoutDirection,"-cart-grid"),t.forEach(a=>{a.classList.add("wallet-cart-button"),n?a.setAttribute("style","width: ".concat(n,"px")):a.setAttribute("style","width: 100%"),o.appendChild(a)});const i=new DocumentFragment;i.appendChild(r),i.appendChild(o),this.appendChild(i)}};w(rt,"instanceCount",0);let $t=rt;async function as(e,t){const n=qn(xn(e));return await Promise.all(n.map(async r=>{try{const o=r.getInstrumentName(),i=bt(Ue.LoadInstrument,"".concat(o,":").concat(t));await r.loadWalletSDK(),A.instrumentLoaded({instrument:o,measurement:i()})}catch(o){E.notify(o)}})),n.filter(r=>r.getPartnerSDKEligibility().eligible)}te("cart-wallet-buttons",$t);class is{getCart(){throw new Error('[NoOpDataSource] Unexpected call to "getCart"')}shippingRequired(){throw new Error('[NoOpDataSource] Unexpected call to "shippingRequired"')}async getSubscriptionPolicy(){throw new Error('[NoOpDataSource] Unexpected call to "getSubscriptionPolicy"')}}const nt=class us extends zt{constructor(){super(),w(this,"instanceNumber",++us.instanceCount),w(this,"i18n"),Ft({shop:{shopId:this.shopId}})}get walletConfig(){return this.getAttribute("wallet-config")}async connectedCallback(){try{if(this.children.length)return;this.instanceNumber===1&&A.initStarted();const t=bt(Ue.ButtonDisplay,"dc:".concat(this.instanceNumber)),n=Ji(this.walletConfig,"WalletButton");if(!n)throw new Wa("[WalletButton] No config provided.");const r=kn(n);if(!await this.eligibleToShow(r))return;const o=r.getInstrumentName();this.i18n=ot();const i=new gt({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale}),a=this.createWebComponent(r,this.i18n,i,o,t);this.innerHTML="",this.appendChild(a),A.initCompleted({result:"success"}),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(t){this.innerHTML="",A.initCompleted({result:"failed"}),E.notify(t)}}createWebComponent(t,n,r,o,i){const a=t.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,disabled:String(this.disabled),dataSource:new is,i18n:n,apiClient:r});return a.onRendered=()=>{A.instrumentLoaded({instrument:o,measurement:i()})},a}async eligibleToShow(t){return!(!t.getLoadEligibility().eligible||(await t.loadWalletSDK(),!t.getPartnerSDKEligibility().eligible))}};w(nt,"instanceCount",0);let Ut=nt;te("shopify-wallet-button",Ut),ao(E),io(E),A.startExporter();
